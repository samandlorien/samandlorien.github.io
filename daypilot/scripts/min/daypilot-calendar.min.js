/*
DayPilot Lite
Copyright (c) 2005 - 2014 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 130
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Calendar!=='undefined'){return;};function loadDefaultCss(){if(DayPilot.Global.defaultCalendarCss){return;};var $b=DayPilot.sheet();$b.add(".calendar_default_main","border: 1px solid #999;font-family: Tahoma, Arial, sans-serif; font-size: 12px;");$b.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #666;background: #eee;");$b.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;	border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;");$b.add(".calendar_default_colheader_inner","text-align: center; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;");$b.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff");$b.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;");$b.add(".calendar_default_message","opacity: 0.9;filter: alpha(opacity=90);	padding: 10px; color: #ffffff;background: #ffa216;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'color: #666; border: 1px solid #999;');$b.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;");$b.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;");$b.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");');$b.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;");$b.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;padding: 2px;margin-right: 1px;font-size: 12px;");$b.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;");$b.add(".calendar_default_event","cursor: default;");$b.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;font-size: 12px;");$b.add(".calendar_default_shadow_inner","background-color: #666666;	opacity: 0.5;filter: alpha(opacity=50);height: 100%;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;");$b.commit();DayPilot.Global.defaultCalendarCss=true;};var DayPilotCalendar={};DayPilotCalendar.selectedCells=[];DayPilotCalendar.topSelectedCell=null;DayPilotCalendar.bottomSelectedCell=null;DayPilotCalendar.selecting=false;DayPilotCalendar.column=null;DayPilotCalendar.firstSelected=null;DayPilotCalendar.firstMousePos=null;DayPilotCalendar.originalMouse=null;DayPilotCalendar.originalHeight=null;DayPilotCalendar.originalTop=null;DayPilotCalendar.resizing=null;DayPilotCalendar.globalHandlers=false;DayPilotCalendar.moving=null;DayPilotCalendar.register=function($c){if(!DayPilotCalendar.registered){DayPilotCalendar.registered=[];};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){if(r[i]===$c){return;}};r.push($c);};DayPilotCalendar.unregister=function($c){var a=DayPilotCalendar.registered;if(!a){return;};var i=DayPilot.indexOf(a,$c);if(i===-1){return;};a.splice(i,1);};DayPilotCalendar.getCellsAbove=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.previousSibling;while(tr&&tr.tagName!=="TR"){tr=tr.previousSibling;}};return $e;};DayPilotCalendar.getCellsBelow=function($d){var $e=[];var c=DayPilotCalendar.getColumn($d);var tr=$d.parentNode;var $f=null;while(tr&&$f!==DayPilotCalendar.firstSelected){$f=tr.getElementsByTagName("td")[c];$e.push($f);tr=tr.nextSibling;while(tr&&tr.tagName!=="TR"){tr=tr.nextSibling;}};return $e;};DayPilotCalendar.getColumn=function($d){var i=0;while($d.previousSibling){$d=$d.previousSibling;if($d.tagName==="TD"){i++;}};return i;};DayPilotCalendar.gUnload=function(ev){if(!DayPilotCalendar.registered){return;};var r=DayPilotCalendar.registered;for(var i=0;i<r.length;i++){var c=r[i];c.dispose();DayPilotCalendar.unregister(c);}};DayPilotCalendar.gMouseUp=function(e){if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;return;};var $g=DayPilotCalendar.resizing.event;var $h=DayPilotCalendar.resizingShadow.clientHeight+4;var top=DayPilotCalendar.resizingShadow.offsetTop;var $i=DayPilotCalendar.resizing.dpBorder;DayPilotCalendar.deleteShadow(DayPilotCalendar.resizingShadow);DayPilotCalendar.resizingShadow=null;DayPilotCalendar.resizing.style.cursor='default';document.body.style.cursor='default';DayPilotCalendar.resizing=null;$g.calendar.eventResizeDispatch($g,$h,top,$i);}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.moving=null;document.body.style.cursor='default';return;};var top=DayPilotCalendar.movingShadow.offsetTop;DayPilotCalendar.deleteShadow(DayPilotCalendar.movingShadow);var $g=DayPilotCalendar.moving.event;var $j=DayPilotCalendar.movingShadow.column;DayPilotCalendar.moving=null;DayPilotCalendar.movingShadow=null;document.body.style.cursor='default';var ev=e||window.event;$g.calendar.eventMoveDispatch($g,$j,top,ev);}};DayPilotCalendar.deleteShadow=function($k){if(!$k){return;};if(!$k.parentNode){return;};$k.parentNode.removeChild($k);};DayPilotCalendar.moveShadow=function($l){var $k=DayPilotCalendar.movingShadow;var parent=$k.parentNode;parent.style.display='none';$k.parentNode.removeChild($k);$l.firstChild.appendChild($k);$k.style.left='0px';parent.style.display='';$k.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};DayPilotCalendar.Calendar=function(id){var $m=false;if(this instanceof DayPilotCalendar.Calendar&&!this.$1C){$m=true;this.$1C=true;};if(!$m){throw "DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";};var $c=this;this.uniqueID=null;this.v='130';this.id=id;this.clientName=id;this.cache={};this.cache.pixels={};this.elements={};this.elements.events=[];this.nav={};this.afterRender=function(){};this.fasterDispose=true;this.api=2;this.borderColor="#CED2CE";this.businessBeginsHour=9;this.businessEndsHour=18;this.cellBackColor="#ffffff";this.cellBorderColor="#DEDFDE";this.cellHeight=20;this.columnMarginRight=5;this.cornerBackColor="#F3F3F9";this.cssOnly=true;this.cssClassPrefix="calendar_default";this.days=1;this.durationBarVisible=true;this.eventBackColor='#638EDE';this.eventBorderColor="#2951A5";this.eventFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventFontSize='8pt';this.eventFontColor="#ffffff";this.eventHeaderFontSize='8pt';this.eventHeaderFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.eventHeaderFontColor="#ffffff";this.eventHeaderHeight=14;this.eventHeaderVisible=true;this.headerFontSize='10pt';this.headerFontFamily='Tahoma, Arial, Helvetica, sans-serif';this.headerFontColor="#42658C";this.headerHeight=20;this.height=300;this.heightSpec='BusinessHours';this.hideUntilInit=true;this.hourHalfBorderColor="#EBEDEB";this.hourBorderColor="#DEDFDE";this.hourFontColor="#42658C";this.hourFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.hourFontSize="16pt";this.hourNameBackColor="#F3F3F9";this.hourNameBorderColor="#DEDFDE";this.hourWidth=45;this.initScrollPos='Auto';this.loadingLabelText="Loading...";this.loadingLabelVisible=true;this.loadingLabelBackColor="ff0000";this.loadingLabelFontColor="#ffffff";this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif";this.loadingLabelFontSize="10pt";this.selectedColor="#316AC5";this.showToolTip=true;this.startDate=new DayPilot.Date().getDatePart();this.timeFormat='Clock12Hours';this.timeRangeSelectedHandling='Enabled';this.eventClickHandling='Enabled';this.eventResizeHandling='Update';this.eventMoveHandling='Update';this.clearSelection=function(){for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d){if($d.selected){$d.removeChild($d.selected);$d.firstChild.style.display='';$d.selected=null;}}}};this.ie=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);this.ff=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1);this.opera105=(function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=10.5;};return false;})();this.webkit522=(function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var v=new Number(RegExp.$1);return v>=522;};return false;})();this.ie9=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE 9")!==-1);this.cleanSelection=this.clearSelection;this.callBack2=function($n,$o,$p){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.callbackTimeout=window.setTimeout(function(){$c.loadingStart();},100);var $q={};$q.action=$n;$q.parameters=$p;$q.data=$o;$q.header=this.getCallBackHeader();var $r="JSON"+DayPilot.JSON.stringify($q);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$r,this.ajaxError);}};this.dispose=function(){var c=$c;c.deleteEvents();c.nav.zoom.onmousemove=null;c.nav.scroll.root=null;DayPilot.pu(c.nav.loading);c.disposeMain();c.disposeHeader();c.nav.select=null;c.nav.cornerRight=null;c.nav.scrollable=null;c.nav.zoom=null;c.nav.loading=null;c.nav.header=null;c.nav.hourTable=null;c.nav.scrolltop=null;c.nav.scroll=null;c.nav.main=null;c.nav.message=null;c.nav.messageClose=null;c.nav.top=null;DayPilotCalendar.unregister(c);};this.registerDispose=function(){var $s=document.getElementById(id);$s.dispose=this.dispose;};this.callBackResponse=function($t){$c.updateView($t.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpc";h.id=this.id;h.v=this.v;h.days=$c.days;h.startDate=$c.startDate;h.heightSpec=$c.heightSpec;h.businessBeginsHour=$c.businessBeginsHour;h.businessEndsHour=$c.businessEndsHour;h.backColor=$c.cellBackColor;h.timeFormat=$c.timeFormat;h.viewType=$c.viewType;h.locale=$c.locale;return h;};this.createShadow=function($u,$v){var $w=$u.parentNode;while($w&&$w.tagName!=="TD"){$w=$w.parentNode;};var $k=document.createElement('div');$k.setAttribute('unselectable','on');$k.style.position='absolute';$k.style.width=($u.offsetWidth-4)+'px';$k.style.height=($u.offsetHeight-4)+'px';$k.style.left=($u.offsetLeft)+'px';$k.style.top=($u.offsetTop)+'px';$k.style.border='2px dotted #666666';$k.style.zIndex=101;$k.style.backgroundColor="#aaaaaa";$k.style.opacity=0.5;$k.style.filter="alpha(opacity=50)";$k.style.border='2px solid #aaaaaa';if($v){$k.style.overflow='hidden';$k.style.fontSize=$u.style.fontSize;$k.style.fontFamily=$u.style.fontFamily;$k.style.color=$u.style.color;$k.innerHTML=$u.data.client.html();};$k.style.MozBorderRadius="5px";$k.style.webkitBorderRadius="5px";$k.style.borderRadius="5px";$w.firstChild.appendChild($k);return $k;};this.$1D={};this.$1D.locale=function(){var $x=DayPilot.Locale.find($c.locale);if(!$x){return DayPilot.Locale.US;};return $x;};var $y=this.$1D;this.updateView=function($z,$A){var $z=eval("("+$z+")");if($z.CallBackRedirect){document.location.href=$z.CallBackRedirect;return;};if($z.UpdateType==="None"){$c.loadingStop();$c.show();return;};$c.deleteEvents();if($z.UpdateType==="Full"){$c.columns=$z.Columns;$c.days=$z.Days;$c.startDate=new DayPilot.Date($z.StartDate);$c.heightSpec=$z.HeightSpec?$z.HeightSpec:$c.heightSpec;$c.businessBeginsHour=$z.BusinessBeginsHour?$z.BusinessBeginsHour:$c.businessBeginsHour;$c.businessEndsHour=$z.BusinessEndsHour?$z.BusinessEndsHour:$c.businessEndsHour;$c.viewType=$z.ViewType;$c.backColor=$z.BackColor?$z.BackColor:$c.backColor;$c.eventHeaderVisible=$z.EventHeaderVisible?$z.EventHeaderVisible:$c.eventHeaderVisible;$c.timeFormat=$z.TimeFormat?$z.TimeFormat:$c.timeFormat;$c.locale=$z.Locale?$z.Locale:$c.locale;$c.prepareColumns();};$c.loadEvents($z.Events);$c.updateHeaderHeight();if($z.UpdateType==="Full"){$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.show();$c.drawEvents();$c.clearSelection();$c.afterRender($z.CallBackData,true);$c.loadingStop();};this.$=function($B){return document.getElementById(id+"_"+$B);};this.durationHours=function(){return 24;};this.businessHoursSpan=function(){if(this.businessBeginsHour>this.businessEndsHour){return 24-this.businessBeginsHour+this.businessEndsHour;}else{return this.businessEndsHour-this.businessBeginsHour;}};this.rowCount=function(){return 48;};this.$1E=function(){return $c.api===2;};this.eventClickCallBack=function(e,$o){this.callBack2('EventClick',$o,e);};this.eventClickDispatch=function(e){var $C=this;var e=$C.event;if($c.$1E()){var $D={};$D.e=e;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventClick==='function'){$c.onEventClick($D);if($D.preventDefault.value){return;}};switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;};if(typeof $c.onEventClicked==='function'){$c.onEventClicked($D);}}else{switch($c.eventClickHandling){case 'CallBack':$c.eventClickCallBack(e);break;case 'JavaScript':$c.onEventClick(e);break;}}};this.eventResizeCallBack=function(e,$E,$F,$o){if(!$E)throw 'newStart is null';if(!$F)throw 'newEnd is null';var $G={};$G.e=e;$G.newStart=$E;$G.newEnd=$F;this.callBack2('EventResize',$o,$G);};this.eventResizeDispatch=function(e,$H,$I,$i){var $J=1;var $E=new Date();var $F=new Date();var $K=e.start();var end=e.end();if($i==='top'){var $L=$K.getDatePart();var $M=Math.floor(($I-$J)/$c.cellHeight);var $N=$M*30;var ts=$N*60*1000;$E=$L.addTime(ts);$F=e.end();}else if($i==='bottom'){var $L=end.getDatePart();var $M=Math.floor(($I+$H-$J)/$c.cellHeight);var $N=$M*30;var ts=$N*60*1000;$E=$K;$F=$L.addTime(ts);};if($c.$1E()){var $D={};$D.e=e;$D.newStart=$E;$D.newEnd=$F;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventResize==='function'){$c.onEventResize($D);if($D.preventDefault.value){return;}};switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$E,$F);break;case 'Update':e.start($E);e.end($F);$c.events.update(e);break;};if(typeof $c.onEventResized==='function'){$c.onEventResized($D);}}else{switch($c.eventResizeHandling){case 'CallBack':$c.eventResizeCallBack(e,$E,$F);break;case 'JavaScript':$c.onEventResize(e,$E,$F);break;}}};this.eventMoveCallBack=function(e,$E,$F,$O,$o){if(!$E)throw 'newStart is null';if(!$F)throw 'newEnd is null';var $G={};$G.e=e;$G.newStart=$E;$G.newEnd=$F;this.callBack2('EventMove',$o,$G);};this.eventMoveDispatch=function(e,$j,$I,ev){var $J=1;var $M=Math.floor(($I-$J)/$c.cellHeight);var $P=$M*30*60*1000;var $K=e.start();var end=e.end();var $L=new Date();if($K.isDayPilotDate){$K=$K.d;};$L.setTime(Date.UTC($K.getUTCFullYear(),$K.getUTCMonth(),$K.getUTCDate()));var $Q=$K.getTime()-($L.getTime()+$K.getUTCHours()*3600*1000+Math.floor($K.getUTCMinutes()/30)*30*60*1000);var length=end.getTime()-$K.getTime();var $R=this.columns[$j];var $S=$R.Start.getTime();var $T=new Date();$T.setTime($S+$P+$Q);var $E=new DayPilot.Date($T);var $F=$E.addTime(length);if($c.$1E()){var $D={};$D.e=e;$D.newStart=$E;$D.newEnd=$F;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onEventMove==='function'){$c.onEventMove($D);if($D.preventDefault.value){return;}};switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$E,$F,$R.Value);break;case 'Update':e.start($E);e.end($F);$c.events.update(e);break;};if(typeof $c.onEventMoved==='function'){$c.onEventMoved($D);}}else{switch($c.eventMoveHandling){case 'CallBack':$c.eventMoveCallBack(e,$E,$F,$R.Value);break;case 'JavaScript':$c.onEventMove(e,$E,$F,$R.Value,false);break;}}};this.timeRangeSelectedCallBack=function($K,end,$U,$o){var $V={};$V.start=$K;$V.end=end;this.callBack2('TimeRangeSelected',$o,$V);};this.timeRangeSelectedDispatch=function($K,end){$K=new DayPilot.Date($K);end=new DayPilot.Date(end);if(this.$1E()){var $D={};$D.start=$K;$D.end=end;$D.preventDefault=function(){this.preventDefault.value=true;};if(typeof $c.onTimeRangeSelect==='function'){$c.onTimeRangeSelect($D);if($D.preventDefault.value){return;}};switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($K,end);break;};if(typeof $c.onTimeRangeSelected==='function'){$c.onTimeRangeSelected($D);}}else{switch($c.timeRangeSelectedHandling){case 'CallBack':$c.timeRangeSelectedCallBack($K,end);break;case 'JavaScript':$c.onTimeRangeSelected($K,end);break;}}};this.onCellMousedown=function(ev){if(DayPilotCalendar.selecting){return;};if($c.timeRangeSelectedHandling==="Disabled"){return;};var $W=(window.event)?window.event.button:ev.which;if($W!==1&&$W!==0){return;};DayPilotCalendar.firstMousePos=DayPilot.mc(ev||window.event);DayPilotCalendar.selecting=true;if(DayPilotCalendar.selectedCells){$c.clearSelection();DayPilotCalendar.selectedCells=[];};DayPilotCalendar.column=DayPilotCalendar.getColumn(this);DayPilotCalendar.selectedCells.push(this);DayPilotCalendar.firstSelected=this;DayPilotCalendar.topSelectedCell=this;DayPilotCalendar.bottomSelectedCell=this;$c.activateSelection();};this.activateSelection=function(){var $X=this.getSelection();for(var j=0;j<DayPilotCalendar.selectedCells.length;j++){var $d=DayPilotCalendar.selectedCells[j];if($d&&!$d.selected){var $Y=document.createElement("div");$Y.style.height=($c.cellHeight-1)+"px";$Y.style.backgroundColor=$c.selectedColor;$d.firstChild.style.display="none";$d.insertBefore($Y,$d.firstChild);$d.selected=$Y;}}};this.mousemove=function(ev){if(typeof(DayPilotCalendar)==='undefined'){return;};if(!DayPilotCalendar.selecting){return;};var $Z=DayPilot.mc(ev||window.event);var $00=DayPilotCalendar.getColumn(this);if($00!==DayPilotCalendar.column){return;};$c.clearSelection();if($Z.y<DayPilotCalendar.firstMousePos.y){DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsBelow(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.selectedCells[0];DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.firstSelected;}else{DayPilotCalendar.selectedCells=DayPilotCalendar.getCellsAbove(this);DayPilotCalendar.topSelectedCell=DayPilotCalendar.firstSelected;DayPilotCalendar.bottomSelectedCell=DayPilotCalendar.selectedCells[0];};$c.activateSelection();};this.getSelection=function(){var $K=DayPilotCalendar.topSelectedCell.start;var end=DayPilotCalendar.bottomSelectedCell.end;return new DayPilot.Selection($K,end,null,$c);};this.mouseup=function(ev){if(DayPilotCalendar.selecting&&DayPilotCalendar.topSelectedCell!==null){DayPilotCalendar.selecting=false;var $01=$c.getSelection();$c.timeRangeSelectedDispatch($01.start,$01.end);if($c.timeRangeSelectedHandling!=="Hold"&&$c.timeRangeSelectedHandling!=="HoldForever"){$a();}}else{DayPilotCalendar.selecting=false;}};this.prepareColumns=function(){this.columns=this.$1F();for(var i=0;i<this.columns.length;i++){this.activateColumn(this.columns[i]);}};this.activateColumn=function($l){$l.Start=new DayPilot.Date($l.Start);$l.putIntoBlock=function(ep){for(var i=0;i<this.blocks.length;i++){var $02=this.blocks[i];if($02.overlapsWith(ep.part.top,ep.part.height)){$02.events.push(ep);$02.min=Math.min($02.min,ep.part.top);$02.max=Math.max($02.max,ep.part.top+ep.part.height);return i;}};var $02=[];$02.lines=[];$02.events=[];$02.overlapsWith=function($K,$03){var end=$K+$03-1;if(!(end<this.min||$K>this.max-1)){return true;};return false;};$02.putIntoLine=function(ep){var $04=this;for(var i=0;i<this.lines.length;i++){var $05=this.lines[i];if($05.isFree(ep.part.top,ep.part.height)){$05.push(ep);return i;}};var $05=[];$05.isFree=function($K,$03){var end=$K+$03-1;var $06=this.length;for(var i=0;i<$06;i++){var e=this[i];if(!(end<e.part.top||$K>e.part.top+e.part.height-1)){return false;}};return true;};$05.push(ep);this.lines.push($05);return this.lines.length-1;};$02.events.push(ep);$02.min=ep.part.top;$02.max=ep.part.top+ep.part.height;this.blocks.push($02);return this.blocks.length-1;};$l.putIntoLine=function(ep){var $04=this;for(var i=0;i<this.lines.length;i++){var $05=this.lines[i];if($05.isFree(ep.part.top,ep.part.height)){$05.push(ep);return i;}};var $05=[];$05.isFree=function($K,$03){var end=$K+$03-1;var $06=this.length;for(var i=0;i<$06;i++){var e=this[i];if(!(end<e.part.top||$K>e.part.top+e.part.height-1)){return false;}};return true;};$05.push(ep);this.lines.push($05);return this.lines.length-1;};};this.$1F=function(){var $07=[];var $K=this.startDate.getDatePart();var $08=this.days;switch(this.viewType){case "Day":$08=1;break;case "Week":$08=7;$K=$K.firstDayOfWeek($y.locale().weekStarts);break;case "WorkWeek":$08=5;$K=$K.firstDayOfWeek(1);break;};if(this.heightSpec==='BusinessHoursNoScroll'){$K=$K.addHours(this.businessBeginsHour);};for(var i=0;i<$08;i++){var $l={};$l.Start=$K.addDays(i);$l.Name=$l.Start.toString($y.locale().datePattern);$l.InnerHTML=$l.Name;$07.push($l);};return $07;};this.visibleStart=function(){return this.columns[0].Start;};this.visibleEnd=function(){var $06=this.columns.length-1;return this.columns[$06].Start.addDays(1);};this.$1G=function($09){var $0a=this.theme||this.cssClassPrefix;if($0a){return $0a+$09;}else{return "";}};this.deleteEvents=function(){if(this.elements.events){for(var i=0;i<this.elements.events.length;i++){var $Y=this.elements.events[i];var $u=$Y.event;if($u){$u.calendar=null;};$Y.onclick=null;$Y.onclickSave=null;$Y.onmouseover=null;$Y.onmouseout=null;$Y.onmousemove=null;$Y.onmousedown=null;if($Y.firstChild&&$Y.firstChild.firstChild&&$Y.firstChild.firstChild.tagName&&$Y.firstChild.firstChild.tagName.toUpperCase()==='IMG'){var $0b=$Y.firstChild.firstChild;$0b.onmousedown=null;$0b.onmousemove=null;$0b.onclick=null;};$Y.helper=null;$Y.data=null;$Y.event=null;DayPilot.de($Y);}};this.elements.events=[];};this.drawEvent=function($o){var $0c=this.nav.events;var $0d=true;var $0e=true;var $0f=false;var $0g=this.eventBorderColor;var $Y=document.createElement("div");$Y.style.position='absolute';$Y.style.left=$o.part.left+'%';$Y.style.top=($o.part.top)+'px';$Y.style.width=$o.part.width+'%';$Y.style.height=Math.max($o.part.height,2)+'px';$Y.style.overflow='hidden';$Y.data=$o;$Y.event=$o;$Y.unselectable='on';$Y.style.MozUserSelect='none';$Y.style.KhtmlUserSelect='none';if(!this.cssOnly){$Y.style.fontFamily=this.eventFontFamily;$Y.style.fontSize=this.eventFontSize;$Y.style.color=this.eventFontColor;if(!$0d){$Y.style.backgroundColor=$0g;}}else{$Y.className=this.$1G("_event");};$Y.isFirst=$o.part.start.getTime()===$o.start().getTime();$Y.isLast=$o.part.end.getTime()===$o.end().getTime();$Y.onclick=this.eventClickDispatch;$Y.onmousemove=function(ev){var $0h=5;var $0i=$c.eventHeaderVisible?($c.eventHeaderHeight):10;if(typeof(DayPilotCalendar)==='undefined'){return;};var $0j=DayPilot.mo3($Y,ev);if(!$0j){return;};if(DayPilotCalendar.resizing||DayPilotCalendar.moving){return;};var $0k=this.isLast;if($0j.y<=$0i&&$c.eventResizeHandling!=='Disabled'){this.style.cursor="n-resize";this.dpBorder='top';}else if(this.offsetHeight-$0j.y<=$0h&&$c.eventResizeHandling!=='Disabled'){if($0k){this.style.cursor="s-resize";this.dpBorder='bottom';}else{this.style.cursor='not-allowed';}}else if(!DayPilotCalendar.resizing&&!DayPilotCalendar.moving){if($c.eventClickHandling!=='Disabled'){this.style.cursor='pointer';}else{this.style.cursor='default';}}};$Y.onmousedown=function(ev){ev=ev||window.event;var $W=ev.which||ev.button;if((this.style.cursor==='n-resize'||this.style.cursor==='s-resize')&&$W===1){DayPilotCalendar.resizing=this;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalHeight=this.offsetHeight;DayPilotCalendar.originalTop=this.offsetTop;}else if($W===1&&this.eventMoveHandling!=='Disabled'){DayPilotCalendar.moving=this;DayPilotCalendar.moving.event=this.event;var $0l=DayPilotCalendar.moving.helper={};$0l.oldColumn=$c.columns[this.data.part.dayIndex].Value;DayPilotCalendar.originalMouse=DayPilot.mc(ev);DayPilotCalendar.originalTop=this.offsetTop;var $0j=DayPilot.mo3(this,ev);if($0j){DayPilotCalendar.moveOffsetY=$0j.y;}else{DayPilotCalendar.moveOffsetY=0;};document.body.style.cursor='move';};return false;};if(!this.cssOnly){var $0m=[];$0m.push("<div");if(this.showToolTip){$0m.push(" title='");$0m.push($o.client.toolTip().replace(/'/g,"&apos;"));$0m.push("'");};var $h=Math.max($o.part.height-2,0);$0m.push(" class='");$0m.push("'");if($0f){$0m.push(" style='margin-top:1px;height:");$0m.push($h-2);}else{$0m.push(" style='margin-top:0px;height:");$0m.push($h);};$0m.push("px;background-color:");$0m.push(this.eventBackColor);if($0e){$0m.push(";border:1px solid ");$0m.push($0g);$0m.push(";-moz-border-radius:5px;");$0m.push(";-webkit-border-radius:5px;");$0m.push(";border-radius:5px;");}else{$0m.push(";border-left:1px solid ");$0m.push($0g);$0m.push(";border-right:1px solid ");$0m.push($0g);};$0m.push(";");$0m.push("' unselectable='on'>");var $0n=this.eventHeaderVisible?this.eventHeaderHeight:0;if(this.eventHeaderVisible){var $0o="";var $0p=$o.start().getHours();var am=$0p<12;var $0q=$o.start().getMinutes();if(this.timeFormat==="Clock12Hours"){$0p=$0p%12;if($0p===0){$0p=12;};$0o=am?"am":"pm";};if($0q<10){$0q="0"+$0q;};var $0r=$0p+":"+$0q+$0o;$0m.push("<div unselectable='on' style='overflow:hidden;height:");$0m.push(this.eventHeaderHeight);$0m.push("px; background-color:");$0m.push($0g);$0m.push(";font-size:");$0m.push(this.eventHeaderFontSize);$0m.push(";color:");$0m.push(this.eventHeaderFontColor);$0m.push("'>");$0m.push($0r);$0m.push("</div>");};$0m.push("<div unselectable='on' style='overflow:hidden;padding-left:2px;height:");$0m.push($h-$0n-1);$0m.push("px;'>");$0m.push($o.client.html());$0m.push("</div></div>");$Y.innerHTML=$0m.join('');}else{var $0s=document.createElement("div");$0s.setAttribute("unselectable","on");$0s.className=$c.$1G("_event_inner");$0s.innerHTML=$o.client.html();$Y.appendChild($0s);if($o.client.barVisible()){var $h=$o.part.height-2;var $0t=100*$o.part.barTop/$h;var $0u=Math.ceil(100*$o.part.barHeight/$h);var $0v=document.createElement("div");$0v.setAttribute("unselectable","on");$0v.className=this.$1G("_event_bar");$0v.style.position="absolute";var $0w=document.createElement("div");$0w.setAttribute("unselectable","on");$0w.className=this.$1G("_event_bar_inner");$0w.style.top=$0t+"%";if(0<$0u&&$0u<=1){$0w.style.height="1px";}else{$0w.style.height=$0u+"%";};$0v.appendChild($0w);$Y.appendChild($0v);}};if($0c.rows[0].cells[$o.part.dayIndex]){var $0x=$0c.rows[0].cells[$o.part.dayIndex].firstChild;$0x.appendChild($Y);$c.makeChildrenUnselectable($Y);};$c.elements.events.push($Y);};this.makeChildrenUnselectable=function(el){var c=(el&&el.childNodes)?el.childNodes.length:0;for(var i=0;i<c;i++){try{var $0y=el.childNodes[i];if($0y.nodeType===1){$0y.unselectable='on';this.makeChildrenUnselectable($0y);}}catch(e){}}};this.drawEvents=function(){for(var i=0;i<this.columns.length;i++){var $0z=this.columns[i];for(var m=0;m<$0z.blocks.length;m++){var $02=$0z.blocks[m];for(var j=0;j<$02.lines.length;j++){var $05=$02.lines[j];for(var k=0;k<$05.length;k++){var e=$05[k];e.part.width=100/$02.lines.length;e.part.left=e.part.width*j;var $0A=(j===$02.lines.length-1);if(!$0A){e.part.width=e.part.width*1.5;};this.drawEvent(e);}}}}};this.drawTop=function(){this.nav.top=document.getElementById(this.id);this.nav.top.innerHTML='';if(this.cssOnly){DayPilot.Util.addClass(this.nav.top,this.$1G("_main"));}else{this.nav.top.style.lineHeight="1.2";this.nav.top.style.textAlign="left";};this.nav.top.style.MozUserSelect='none';this.nav.top.style.KhtmlUserSelect='none';this.nav.top.style.position='relative';this.nav.top.style.width=this.width?this.width:'100%';if(this.hideUntilInit){this.nav.top.style.visibility='hidden';};this.nav.scroll=document.createElement("div");this.nav.scroll.style.height=this.getScrollableHeight()+"px";if(this.heightSpec==='BusinessHours'){this.nav.scroll.style.overflow="auto";}else{this.nav.scroll.style.overflow="hidden";};this.nav.scroll.style.position="relative";if(!this.cssOnly){this.nav.scroll.style.border="1px solid "+this.borderColor;this.nav.scroll.style.backgroundColor=this.hourNameBackColor;};var $0B=this.drawTopHeaderDiv();this.nav.top.appendChild($0B);this.nav.scroll.style.zoom=1;var $0C=this.drawScrollable();this.nav.scrollable=$0C.firstChild;this.nav.scroll.appendChild($0C);this.nav.top.appendChild(this.nav.scroll);this.nav.scrollLayer=document.createElement("div");this.nav.scrollLayer.style.position='absolute';this.nav.scrollLayer.style.top='0px';this.nav.scrollLayer.style.left='0px';this.nav.top.appendChild(this.nav.scrollLayer);this.nav.loading=document.createElement("div");this.nav.loading.style.position='absolute';this.nav.loading.style.top='0px';this.nav.loading.style.left=(this.hourWidth+5)+"px";this.nav.loading.style.backgroundColor=this.loadingLabelBackColor;this.nav.loading.style.fontSize=this.loadingLabelFontSize;this.nav.loading.style.fontFamily=this.loadingLabelFontFamily;this.nav.loading.style.color=this.loadingLabelFontColor;this.nav.loading.style.padding='2px';this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.display='none';this.nav.top.appendChild(this.nav.loading);};this.drawHourTable=function(){if(!this.fasterDispose)DayPilot.pu(this.nav.hourTable);this.nav.scrollable.rows[0].cells[0].innerHTML='';this.nav.hourTable=this.createHourTable();this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable);};this.drawScrollable=function(){var $0D=document.createElement("div");$0D.style.zoom=1;$0D.style.position='relative';var $0E=document.createElement("table");$0E.cellSpacing="0";$0E.cellPadding="0";$0E.border="0";$0E.style.border="0px none";$0E.style.width="100%";$0E.style.position='absolute';var r=$0E.insertRow(-1);var c;c=r.insertCell(-1);c.valign="top";c.style.padding='0px';c.style.border='0px none';this.nav.hourTable=this.createHourTable();c.appendChild(this.nav.hourTable);c=r.insertCell(-1);c.valign="top";c.width="100%";c.style.padding='0px';c.style.border='0px none';if(!this.cssOnly){c.appendChild(this.createEventsAndCells());}else{var $0C=document.createElement("div");$0C.style.position="relative";c.appendChild($0C);$0C.appendChild(this.createEventsAndCells());$0C.appendChild(this.$1H());};$0D.appendChild($0E);this.nav.zoom=$0D;return $0D;};this.createEventsAndCells=function(){var $0E=document.createElement("table");$0E.cellPadding="0";$0E.cellSpacing="0";$0E.border="0";$0E.style.width="100%";$0E.style.border="0px none";$0E.style.tableLayout='fixed';if(!this.cssOnly){$0E.style.borderLeft="1px solid "+this.borderColor;};this.nav.main=$0E;this.nav.events=$0E;return $0E;};this.$1H=function(){var $0E=document.createElement("table");$0E.style.top="0px";$0E.cellPadding="0";$0E.cellSpacing="0";$0E.border="0";$0E.style.position="absolute";$0E.style.width="100%";$0E.style.border="0px none";$0E.style.tableLayout='fixed';this.nav.events=$0E;var $0F=true;var $07=this.columns;var cl=$07.length;var r=($0F)?$0E.insertRow(-1):$0E.rows[0];for(var j=0;j<cl;j++){var c=($0F)?r.insertCell(-1):r.cells[j];if($0F){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $Y=document.createElement("div");$Y.style.marginRight=$c.columnMarginRight+"px";$Y.style.position='relative';$Y.style.height='1px';if(!this.cssOnly){$Y.style.fontSize='1px';$Y.style.lineHeight='1.2';};$Y.style.marginTop='-1px';c.appendChild($Y);}};return $0E;};this.createHourTable=function(){var $0E=document.createElement("table");$0E.cellSpacing="0";$0E.cellPadding="0";$0E.border="0";$0E.style.border='0px none';$0E.style.width=this.hourWidth+"px";$0E.oncontextmenu=function(){return false;};var $0G=this.cssOnly?0:1;if($0G){var r=$0E.insertRow(-1);r.style.height="1px";r.style.backgroundColor="white";var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';};var $0H=24;for(var i=0;i<$0H;i++){this.createHourRow($0E,i);};return $0E;};this.createHourRow=function($0E,i){var $h=(this.cellHeight*2);var r=$0E.insertRow(-1);r.style.height=$h+"px";var c=r.insertCell(-1);c.valign="bottom";c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.style.cursor="default";c.style.padding='0px';c.style.border='0px none';var $0I=document.createElement("div");$0I.style.position="relative";if(this.cssOnly){$0I.className=this.$1G("_rowheader");};$0I.style.width=this.hourWidth+"px";$0I.style.height=($h)+"px";$0I.style.overflow='hidden';$0I.unselectable='on';var $02=document.createElement("div");if(this.cssOnly){$02.className=this.$1G("_rowheader_inner");}else{$02.style.borderBottom="1px solid "+this.hourNameBorderColor;$02.style.textAlign="right";};$02.style.height=($h-1)+"px";$02.unselectable="on";var $0r=document.createElement("div");if(!this.cssOnly){$0r.style.padding="2px";$0r.style.fontFamily=this.hourFontFamily;$0r.style.fontSize=this.hourFontSize;$0r.style.color=this.hourFontColor;};$0r.unselectable="on";var $K=this.startDate.addHours(i);var $0p=$K.getHours();var am=$0p<12;if(this.timeFormat==="Clock12Hours"){$0p=$0p%12;if($0p===0){$0p=12;}};$0r.innerHTML=$0p;var $0J=document.createElement("span");$0J.unselectable="on";if(!this.cssOnly){$0J.style.fontSize="10px";$0J.style.verticalAlign="super";}else{$0J.className=this.$1G("_rowheader_minutes");};var $0K;if(this.timeFormat==="Clock12Hours"){if(am){$0K="AM";}else{$0K="PM";}}else{$0K="00";};if(!this.cssOnly){$0J.innerHTML="&nbsp;"+$0K;}else{$0J.innerHTML=$0K;};$0r.appendChild($0J);$02.appendChild($0r);$0I.appendChild($02);c.appendChild($0I);};this.getScrollableHeight=function(){switch(this.heightSpec){case "Full":return(24*2*this.cellHeight);case "BusinessHours":var $0L=this.businessHoursSpan();return $0L*this.cellHeight*2;default:throw "DayPilot.Calendar: Unexpected 'heightSpec' value.";}};this.drawTopHeaderDiv=function(){var $0B=document.createElement("div");if(!this.cssOnly){$0B.style.borderLeft="1px solid "+this.borderColor;$0B.style.borderRight="1px solid "+this.borderColor;};$0B.style.overflow="auto";var $0E=document.createElement("table");$0E.cellPadding="0";$0E.cellSpacing="0";$0E.border="0";$0E.style.width="100%";$0E.style.borderCollapse='separate';$0E.style.border="0px none";var r=$0E.insertRow(-1);var c=r.insertCell(-1);c.style.padding='0px';c.style.border='0px none';var $0M=this.drawCorner();c.appendChild($0M);this.nav.corner=$0M;c=r.insertCell(-1);c.style.width="100%";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;};c.valign="top";c.style.position='relative';c.style.padding='0px';c.style.border='0px none';this.nav.header=document.createElement("table");this.nav.header.cellPadding="0";this.nav.header.cellSpacing="0";this.nav.header.border="0";this.nav.header.width="100%";this.nav.header.style.tableLayout="fixed";if(!this.cssOnly){this.nav.header.style.borderBottom="0px none #000000";this.nav.header.style.borderRight="0px none #000000";this.nav.header.style.borderLeft="1px solid "+this.borderColor;this.nav.header.style.borderTop="1px solid "+this.borderColor;};this.nav.header.oncontextmenu=function(){return false;};var $0N=this.nav.scroll.style.overflow!=='hidden';if(!this.cssOnly){if($0N){this.nav.header.style.borderRight="1px solid "+this.borderColor;}};c.appendChild(this.nav.header);if($0N){c=r.insertCell(-1);c.unselectable="on";if(!this.cssOnly){c.style.backgroundColor=this.hourNameBackColor;c.style.borderTop="1px solid "+this.borderColor;c.style.borderBottom="0px none";c.style.borderLeft="0px none";c.style.borderRight="0px none";c.style.padding='0px';c.style.verticalAlign='top';c.innerHTML="&nbsp;";};var $0m=document.createElement("div");$0m.unselectable="on";$0m.style.position="relative";$0m.style.width="16px";if(!this.cssOnly){$0m.style.lineHeight="1px";$0m.style.fontSize="1px";$0m.style.height="1px";}else{$0m.style.height=this.headerHeight+"px";$0m.className=this.$1G("_cornerright");var $0s=document.createElement("div");$0s.className=this.$1G('_cornerright_inner');$0m.appendChild($0s);};c.appendChild($0m);this.nav.cornerRight=$0m;};$0B.appendChild($0E);return $0B;};this.drawCorner=function(){var $0C=document.createElement("div");$0C.style.position='relative';if(this.cssOnly){$0C.className=this.$1G("_corner");}else{$0C.style.backgroundColor=this.hourNameBackColor;$0C.style.fontFamily=this.headerFontFamily;$0C.style.fontSize=this.headerFontSize;$0C.style.color=this.headerFontColor;$0C.style.borderTop="1px solid "+this.borderColor;};$0C.style.width=this.hourWidth+"px";$0C.style.height=this.headerHeight+"px";$0C.oncontextmenu=function(){return false;};var $0M=document.createElement("div");$0M.unselectable="on";if(this.cssOnly){$0M.className=this.$1G("_corner_inner");};$0C.appendChild($0M);return $0C;};this.disposeMain=function(){var $0E=this.nav.main;$0E.root=null;$0E.onmouseup=null;for(var y=0;y<$0E.rows.length;y++){var r=$0E.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.root=null;c.onmousedown=null;c.onmousemove=null;c.onmouseout=null;c.onmouseup=null;}};if(!this.fasterDispose)DayPilot.pu($0E);};this.drawMain=function(){var $0O=[];var $0P=[];var $0E=this.nav.main;var $M=30*60*1000;var $0Q=this.rowCount();var $07=$c.columns;var $0F=!this.tableCreated||$07.length!==$0E.rows[0].cells.length||$0Q!==$0E.rows.length;if($0E){this.disposeMain();}while($0E&&$0E.rows&&$0E.rows.length>0&&$0F){if(!this.fasterDispose){DayPilot.pu($0E.rows[0]);};$0E.deleteRow(0);};this.tableCreated=true;var cl=$07.length;if(this.cssOnly){var $0R=this.nav.events;while($0R&&$0R.rows&&$0R.rows.length>0&&$0F){if(!this.fasterDispose){DayPilot.pu($0R.rows[0]);};$0R.deleteRow(0);};var cl=$07.length;var r=($0F)?$0R.insertRow(-1):$0R.rows[0];for(var j=0;j<cl;j++){var c=($0F)?r.insertCell(-1):r.cells[j];if($0F){c.style.padding='0px';c.style.border='0px none';c.style.height='0px';c.style.overflow='visible';if(!$c.rtl){c.style.textAlign='left';};var $Y=document.createElement("div");$Y.style.marginRight=$c.columnMarginRight+"px";$Y.style.position='relative';$Y.style.height='1px';if(!this.cssOnly){$Y.style.fontSize='1px';$Y.style.lineHeight='1.2';};$Y.style.marginTop='-1px';c.appendChild($Y);}}};if(!this.cssOnly){var r=($0F)?$0E.insertRow(-1):$0E.rows[0];if($0F){r.style.backgroundColor='white';};for(var j=0;j<cl;j++){var c=($0F)?r.insertCell(-1):r.cells[j];if($0F){c.style.padding='0px';c.style.border='0px none';c.style.height='1px';c.style.overflow='visible';c.style.width=(100.0/$07.length)+"%";var $Y=document.createElement("div");$Y.style.display='block';$Y.style.marginRight=$c.columnMarginRight+"px";$Y.style.position='relative';$Y.style.height='1px';$Y.style.fontSize='1px';$Y.style.lineHeight='1.2';$Y.style.marginTop='-1px';c.appendChild($Y);}}};for(var i=0;i<$0Q;i++){var $0G=this.cssOnly?0:1;var r=($0F)?$0E.insertRow(-1):$0E.rows[i+$0G];if($0F){r.style.MozUserSelect='none';r.style.KhtmlUserSelect='none';};for(var j=0;j<cl;j++){var $0z=this.columns[j];var c=($0F)?r.insertCell(-1):r.cells[j];c.start=$0z.Start.addTime(i*$M);c.end=c.start.addTime($M);c.onmousedown=this.onCellMousedown;c.onmousemove=this.mousemove;c.onmouseup=function(){return false;};c.onclick=function(){return false;};if($0F){c.root=this;c.style.padding='0px';c.style.border='0px none';c.style.verticalAlign='top';if(!this.cssOnly){if(j!==cl-1){c.style.borderRight='1px solid '+$c.cellBorderColor;}};c.style.height=$c.cellHeight+'px';c.style.overflow='hidden';c.unselectable='on';if(!this.cssOnly){var $Y=document.createElement("div");$Y.unselectable='on';$Y.style.fontSize='1px';$Y.style.height='0px';var $0S=(c.end.getMinutes()+c.end.getSeconds()+c.end.getMilliseconds())>0;if($0S){if($c.hourHalfBorderColor!==''){$Y.style.borderBottom='1px solid '+$c.hourHalfBorderColor;}}else{if($c.hourBorderColor!==''){$Y.style.borderBottom='1px solid '+$c.hourBorderColor;}};var $0T=document.createElement("div");$0T.style.height=($c.cellHeight-1)+"px";$0T.style.overflow='hidden';$0T.unselectable='on';c.appendChild($0T);}else{var $Y=document.createElement("div");$Y.unselectable='on';$Y.style.height=$c.cellHeight+"px";$Y.style.position="relative";$Y.className=this.$1G("_cell");var $0U=this.$1I(c.start,c.end);if($0U&&this.cssOnly){DayPilot.Util.addClass($Y,$c.$1G("_cell_business"));};var $0s=document.createElement("div");$0s.setAttribute("unselectable","on");$0s.className=this.$1G("_cell_inner");$Y.appendChild($0s);c.appendChild($Y);};c.appendChild($Y);};c.style.backgroundColor=$c.cellBackColor;$0T=c.firstChild;}};$0E.onmouseup=this.mouseup;$0E.root=this;$c.nav.scrollable.onmousemove=function(ev){ev=ev||window.event;var $0V=$c.nav.scrollable;$c.coords=DayPilot.mo3($0V,ev);var $Z=DayPilot.mc(ev);if(DayPilotCalendar.resizing){if(!DayPilotCalendar.resizingShadow){DayPilotCalendar.resizingShadow=$c.createShadow(DayPilotCalendar.resizing,false,$c.shadow);};var $0W=$c.cellHeight;var $J=1;var $0X=($Z.y-DayPilotCalendar.originalMouse.y);if(DayPilotCalendar.resizing.dpBorder==='bottom'){var $0Y=Math.floor(((DayPilotCalendar.originalHeight+DayPilotCalendar.originalTop+$0X)+$0W/ 2)/ $0W)*$0W-DayPilotCalendar.originalTop+$J;if($0Y<$0W)$0Y=$0W;var $06=$c.nav.main.clientHeight;if(DayPilotCalendar.originalTop+$0Y>$06)$0Y=$06-DayPilotCalendar.originalTop;DayPilotCalendar.resizingShadow.style.height=($0Y-4)+'px';}else if(DayPilotCalendar.resizing.dpBorder==='top'){var $0Z=Math.floor(((DayPilotCalendar.originalTop+$0X-$J)+$0W/ 2)/ $0W)*$0W+$J;if($0Z<$J){$0Z=$J;};if($0Z>DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0W){$0Z=DayPilotCalendar.originalTop+DayPilotCalendar.originalHeight-$0W;};var $0Y=DayPilotCalendar.originalHeight-($0Z-DayPilotCalendar.originalTop)-4;if($0Y<$0W){$0Y=$0W;}else{DayPilotCalendar.resizingShadow.style.top=$0Z+'px';};DayPilotCalendar.resizingShadow.style.height=($0Y)+'px';}}else if(DayPilotCalendar.moving){if(!DayPilotCalendar.movingShadow){DayPilotCalendar.movingShadow=$c.createShadow(DayPilotCalendar.moving,!$c.ie,$c.shadow);DayPilotCalendar.movingShadow.style.width=(DayPilotCalendar.movingShadow.parentNode.offsetWidth+1)+'px';};if(!$c.coords){return;};var $0W=$c.cellHeight;var $J=1;var $0j=DayPilotCalendar.moveOffsetY;if(!$0j){$0j=$0W/2;};var $0Z=Math.floor((($c.coords.y-$0j-$J)+$0W/ 2)/ $0W)*$0W+$J;if($0Z<$J){$0Z=$J;};var $0c=$c.nav.events;var $06=$c.nav.main.clientHeight;var $h=parseInt(DayPilotCalendar.movingShadow.style.height);if($0Z+$h>$06){$0Z=$06-$h;};DayPilotCalendar.movingShadow.parentNode.style.display='none';DayPilotCalendar.movingShadow.style.top=$0Z+'px';DayPilotCalendar.movingShadow.parentNode.style.display='';var $10=$0c.clientWidth/$0c.rows[0].cells.length;var $l=Math.floor(($c.coords.x-45)/$10);if($l<0){$l=0;};if($l<$0c.rows[0].cells.length&&$l>=0&&DayPilotCalendar.movingShadow.column!==$l){DayPilotCalendar.movingShadow.column=$l;DayPilotCalendar.moveShadow($0c.rows[0].cells[$l]);}}};$c.nav.scrollable.style.display='';};this.$1I=function($K,end){if(this.businessBeginsHour<this.businessEndsHour){return !($K.getHours()<this.businessBeginsHour||$K.getHours()>=this.businessEndsHour||$K.getDayOfWeek()===6||$K.getDayOfWeek()===0);};if($K.getHours()>=this.businessBeginsHour){return true;};if($K.getHours()<this.businessEndsHour){return true;};return false;};this.disposeHeader=function(){var $0E=this.nav.header;if($0E&&$0E.rows){for(var y=0;y<$0E.rows.length;y++){var r=$0E.rows[y];for(var x=0;x<r.cells.length;x++){var c=r.cells[x];c.onclick=null;c.onmousemove=null;c.onmouseout=null;}}};if(!this.fasterDispose)DayPilot.pu($0E);};this.drawHeaderRow=function($0F){var r=($0F)?this.nav.header.insertRow(-1):this.nav.header.rows[0];var $07=this.columns;var $11=$07.length;for(var i=0;i<$11;i++){var $o=$07[i];var $d=($0F)?r.insertCell(-1):r.cells[i];$d.data=$o;$d.style.overflow='hidden';$d.style.padding='0px';$d.style.border='0px none';$d.style.height=(this.headerHeight)+"px";var $Y=($0F)?document.createElement("div"):$d.firstChild;if($0F){$Y.unselectable='on';$Y.style.MozUserSelect='none';$Y.style.backgroundColor=$o.BackColor;$Y.style.cursor='default';$Y.style.position='relative';if(!this.cssOnly){$Y.style.fontFamily=this.headerFontFamily;$Y.style.fontSize=this.headerFontSize;$Y.style.color=this.headerFontColor;if(i!==$11-1){$Y.style.borderRight="1px solid "+this.borderColor;}}else{$Y.className=$c.$1G('_colheader');};$Y.style.height=this.headerHeight+"px";var $0r=document.createElement("div");if(!this.cssOnly){$0r.style.position='absolute';$0r.style.left='0px';$0r.style.width='100%';$0r.style.padding="2px";$Y.style.textAlign='center';}else{$0r.className=$c.$1G('_colheader_inner');};$0r.unselectable='on';$Y.appendChild($0r);$d.appendChild($Y);};var $0r=$Y.firstChild;$0r.innerHTML=$o.InnerHTML;}};this.widthUnit=function(){if(this.width&&this.width.indexOf("px")!==-1){return "Pixel";};return "Percentage";};this.drawHeader=function(){var $0B=this.nav.header;var $0F=true;var $07=this.columns;var $11=$07.length;if(this.headerCreated&&$0B&&$0B.rows&&$0B.rows.length>0){$0F=$0B.rows[$0B.rows.length-1].cells.length!==$11;}while(this.headerCreated&&$0B&&$0B.rows&&$0B.rows.length>0&&$0F){if(!this.fasterDispose)DayPilot.pu($0B.rows[0]);$0B.deleteRow(0);};this.headerCreated=true;if(!$0F){var $0M=$c.nav.corner;if(!this.cssOnly){$0M.style.backgroundColor=$c.cornerBackColor;};if(!this.fasterDispose)DayPilot.pu($0M.firstChild);};this.drawHeaderRow($0F);};this.loadingStart=function(){if(this.loadingLabelVisible){this.nav.loading.innerHTML=this.loadingLabelText;this.nav.loading.style.top=(this.headerHeight+5)+"px";this.nav.loading.style.display='';}};this.commandCallBack=function($12,$o){var $G={};$G.command=$12;this.callBack2('Command',$o,$G);};this.loadingStop=function($13){if(this.callbackTimeout){window.clearTimeout(this.callbackTimeout);};this.nav.loading.style.display='none';};this.enableScrolling=function(){var $14=this.nav.scroll;var $15=(typeof this.$1J.scrollpos!=='undefined')?this.$1J.scrollpos:this.initScrollPos;if(!$15){return;};if($15==='Auto'){if(this.heightSpec==="BusinessHours"){$15=2*this.cellHeight*this.businessBeginsHour;}else{$15=0;}};$14.root=this;if($14.scrollTop===0){$14.scrollTop=$15;}};this.callbackError=function($z,$A){alert("Error!\r\nResult: "+$z+"\r\nContext:"+$A);};this.fixScrollHeader=function(){var w=DayPilot.sw(this.nav.scroll);var d=this.nav.cornerRight;if(d&&w>0){if(this.cssOnly){d.style.width=w+'px';}else{d.style.width=(w-3)+'px';}}};this.registerGlobalHandlers=function(){if(!DayPilotCalendar.globalHandlers){DayPilotCalendar.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotCalendar.gMouseUp);DayPilot.re(window,'unload',DayPilotCalendar.gUnload);}};this.events={};this.events.list=[];this.events.add=function(e){e.calendar=$c;if(!$c.events.list){$c.events.list=[];};$c.events.list.push(e.data);$c.update();};this.events.update=function(e){e.commit();$c.update();};this.events.remove=function(e){var $16=DayPilot.indexOf($c.events.list,e.data);$c.events.list.splice($16,1);$c.update();};this.update=function(){this.tableCreated=false;this.$1J.scrollpos=this.nav.scroll.scrollTop;this.deleteEvents();this.$1K();this.init();return;$c.prepareVariables();$c.deleteEvents();var $17=true;if($17){$c.prepareColumns();$c.drawHeader();$c.drawMain();$c.drawHourTable();$c.updateHeight();};$c.loadEvents();$c.updateHeaderHeight();$c.show();$c.drawEvents();$c.clearSelection();};this.loadEvents=function($0R){if(!$0R){$0R=this.events.list;};var length=$0R.length;var $18=24*60*60*1000;this.cache.pixels={};var $19=[];this.scrollLabels=[];this.minStart=10000;this.maxEnd=0;if(!$0R){return;};for(var i=0;i<length;i++){var e=$0R[i];e.start=new DayPilot.Date(e.start);e.end=new DayPilot.Date(e.end);};for(var i=0;i<this.columns.length;i++){var scroll={};scroll.minEnd=1000000;scroll.maxStart=-1;this.scrollLabels.push(scroll);var $0z=this.columns[i];$0z.events=[];$0z.lines=[];$0z.blocks=[];var $1a=new DayPilot.Date($0z.Start);var $1b=$1a.getTime();var $1c=$1a.addTime($18);var $1d=$1c.getTime();for(var j=0;j<length;j++){if($19[j]){continue;};var e=$0R[j];var $K=e.start;var end=e.end;var $1e=$K.getTime();var $1f=end.getTime();if($1f<$1e){continue;};var $1g=!($1f<=$1b||$1e>=$1d);if($1g){var ep=new DayPilot.Event(e,$c);ep.part.dayIndex=i;ep.part.start=$1b<$1e?e.start:$1a;ep.part.end=$1d>$1f?e.end:$1c;var $1h=this.getPixels(ep.part.start,$0z.Start);var $1i=this.getPixels(ep.part.end,$0z.Start);var top=$1h.top;var $1j=$1i.top;if(top===$1j&&($1h.cut||$1i.cut)){continue;};var $1k=$1i.boxBottom;ep.part.top=Math.floor(top/this.cellHeight)*this.cellHeight;if(!this.cssOnly){ep.part.top+=1;};ep.part.height=Math.max(Math.ceil($1k/this.cellHeight)*this.cellHeight-ep.part.top,this.cellHeight-1)+1;ep.part.barTop=Math.max(top-ep.part.top-1,0);ep.part.barHeight=Math.max($1j-top-2,1);var $K=ep.part.top;var end=ep.part.top+ep.part.height;if($K>scroll.maxStart){scroll.maxStart=$K;};if(end<scroll.minEnd){scroll.minEnd=end;};if($K<this.minStart){this.minStart=$K;};if(end>this.maxEnd){this.maxEnd=end;};$0z.events.push(ep);if(ep.part.start.getTime()===$1e&&ep.part.end.getTime()===$1f){$19[j]=true;}}}};for(var i=0;i<this.columns.length;i++){var $0z=this.columns[i];$0z.events.sort(this.eventComparer);for(var j=0;j<$0z.events.length;j++){var e=$0z.events[j];$0z.putIntoBlock(e);};for(var j=0;j<$0z.blocks.length;j++){var $02=$0z.blocks[j];$02.events.sort(this.eventComparer);for(var k=0;k<$02.events.length;k++){var e=$02.events[k];$02.putIntoLine(e);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $1l=a.start().getTime()-b.start().getTime();if($1l!==0){return $1l;};var $1m=b.end().getTime()-a.end().getTime();return $1m;};this.debug=function($13,$1n){if(!this.debuggingEnabled){return;};if(!$c.debugMessages){$c.debugMessages=[];};$c.debugMessages.push($13);if(typeof console!=='undefined'){console.log($13);}};this.getPixels=function($S,$K){if(!$K)$K=this.startDate;var $1e=$K.getTime();var $1o=$S.getTime();var $1p=this.cache.pixels[$1o+"_"+$1e];if($1p){return $1p;};$1e=$K.getTime();var $1q=30*60*1000;var $1r=$1o-$1e;var $1s=$1r%$1q;var $1t=$1r-$1s;var $1u=$1t+$1q;if($1s===0){$1u=$1t;};var $z={};$z.cut=false;$z.top=this.ticksToPixels($1r);$z.boxTop=this.ticksToPixels($1t);$z.boxBottom=this.ticksToPixels($1u);this.cache.pixels[$1o+"_"+$1e]=$z;return $z;};this.ticksToPixels=function($1o){return Math.floor((this.cellHeight*$1o)/(1000*60*30));};this.prepareVariables=function(){this.startDate=new DayPilot.Date(this.startDate);};this.updateHeaderHeight=function(){if(this.nav.corner){this.nav.corner.style.height=this.headerHeight+"px";}};this.updateHeight=function(){var sh=this.getScrollableHeight();if(this.nav.scroll&&sh>0){this.nav.scroll.style.height=sh+"px";}};this.$1L=function(){if(this.backendUrl||typeof WebForm_DoCallback==='function'){return(typeof $c.events.list==='undefined')||(!$c.events.list);}else{return false;}};this.show=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.initShort=function(){this.prepareVariables();this.prepareColumns();this.drawTop();this.drawHeader();this.drawMain();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);this.callBack2('Init');};this.$1J={};this.$1M=function(){this.$1J.themes=[];this.$1J.themes.push(this.theme||this.cssClassPrefix);};this.$1K=function(){var $1v=this.$1J.themes;for(var i=0;i<$1v.length;i++){var $1w=$1v[i];DayPilot.Util.removeClass(this.nav.top,$1w+"_main");};this.$1J.themes=[];};this.init=function(){var $1x=this.$1L();loadDefaultCss();this.$1M();if($1x){this.initShort();return;};this.prepareVariables();this.prepareColumns();if(this.events){this.loadEvents();};this.drawTop();this.drawHeader();this.drawMain();this.show();this.fixScrollHeader();this.enableScrolling();this.registerGlobalHandlers();DayPilotCalendar.register(this);if(this.events){this.updateHeaderHeight();this.drawEvents();};this.afterRender(null,false);};this.Init=this.init;};DayPilotCalendar.Cell=function($K,end,$l){this.start=$K;this.end=end;this.column=function(){};};DayPilotCalendar.Column=function($1y,name,$S){this.value=$1y;this.name=name;this.date=new DayPilot.Date($S);};DayPilot.Calendar=DayPilotCalendar.Calendar;if(typeof jQuery==='undefined'){return;};(function($){$.fn.daypilotCalendar=function($1z){var $1A=null;var j=this.each(function(){if(this.daypilot){return;};var $1B=new DayPilot.Calendar(this.id);this.daypilot=$1B;for(name in $1z){$1B[name]=$1z[name];};$1B.Init();if(!$1A){$1A=$1B;}});if(this.length===1){return $1A;}else{return j;}};})(jQuery);})();


