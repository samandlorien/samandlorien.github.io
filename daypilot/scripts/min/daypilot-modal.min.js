/*
DayPilot Lite
Copyright (c) 2005 - 2014 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 130
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(){DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};var $e=(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1);DayPilot.Modal=function(){this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.border="10px solid #ccc";this.corners='Rounded';this.className=null;this.dragDrop=true;this.height=200;this.maxHeight=null;this.opacity=30;this.scrollWithPage=true;this.top=20;this.useIframe=true;this.width=500;this.zIndex=null;this.closed=null;var $f=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.registered=false;this.start=null;this.coords=null;this.showHtml=function($g){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.create();};this.update();if(this.useIframe){var $h=function(p,$i){return function(){p.setInnerHTML(p.id+"iframe",$i);};};window.setTimeout($h(this,$g),0);}else{this.div.innerHTML=$g;};this.update();this.register();};this.rounded=function(){return this.corners&&this.corners.toLowerCase()==='rounded';};this.showUrl=function($j){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};this.useIframe=true;if(!this.div){this.create();};this.re(this.iframe,"load",this.onIframeLoad);this.iframe.src=$j;this.update();this.register();};this.update=function(){var $k=window;var $l=document;var scrollY=$k.pageYOffset?$k.pageYOffset:(($l.documentElement&&$l.documentElement.scrollTop)?$l.documentElement.scrollTop:$l.body.scrollTop);var $m=function(){return $f.windowRect().y;};this.hideDiv.style.filter="alpha(opacity="+this.opacity+")";this.hideDiv.style.opacity="0."+this.opacity;this.hideDiv.style.backgroundColor="black";if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){$f.hideDiv.onclick=function(){$f.hide();};},500);this.div.className=this.className;this.div.style.border=this.border;if(this.rounded()){this.div.style.MozBorderRadius="5px";this.div.style.webkitBorderRadius="5px";this.div.style.borderRadius="5px";};this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";this.div.style.position='absolute';this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){this.div.style.height=this.height+'px';};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';DayPilot.ModalStatic.list.push(this);};this.onIframeLoad=function(){$f.iframe.contentWindow.modal=$f;if($f.autoStretch){$f.stretch();}};this.stretch=function(){var $m=function(){return $f.windowRect().y;};var $n=this.maxHeight||$m()-2*this.top;for(var h=this.height;h<$n&&this.hasScrollbar();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.onIframeLoad);}};this.hasScrollbar=function(){var document=this.iframe.contentWindow.document;var $o=document.compatMode==='BackCompat'?document.body:document.documentElement;var $p=$o.scrollHeight>$o.clientHeight;var $q=$o.scrollWidth>$o.clientWidth;return $p;};this.windowRect=function(){var $l=document;if($l.compatMode==="CSS1Compat"&&$l.documentElement&&$l.documentElement.clientWidth){var x=$l.documentElement.clientWidth;var y=$l.documentElement.clientHeight;return{x:x,y:y};}else{var x=$l.body.clientWidth;var y=$l.body.clientHeight;return{x:x,y:y};}};this.register=function(){if(this.registered){return;};this.re(window,'resize',this.resize);this.re(window,'scroll',this.resize);if(this.dragDrop){this.re(document,'mousemove',this.drag);this.re(document,'mouseup',this.drop);};this.registered=true;};this.drag=function(e){if(!$f.coords){return;};var e=e||window.event;var $r=$f.mc(e);var x=$r.x-$f.coords.x;var y=$r.y-$f.coords.y;$f.div.style.marginLeft='0px';$f.div.style.top=($f.start.y+y)+"px";$f.div.style.left=($f.start.x+x)+"px";};this.drop=function(e){if(!$f.coords){return;};$f.unmaskIframe();$f.coords=null;};this.maskIframe=function(){if(!this.useIframe){return;};var $s=80;var $t=document.createElement("div");$t.style.backgroundColor="#ffffff";$t.style.filter="alpha(opacity="+$s+")";$t.style.opacity="0."+$s;$t.style.width="100%";$t.style.height=this.height+"px";$t.style.position="absolute";$t.style.left='0px';$t.style.top='0px';this.div.appendChild($t);this.mask=$t;};this.unmaskIframe=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.resize=function(){if(!$f.hideDiv){return;};if(!$f.div){return;};if($f.hideDiv.style.display==='none'){return;};if($f.div.style.display==='none'){return;};var scrollY=window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);if(!$f.scrollWithPage){$f.div.style.top=(scrollY+$f.top)+'px';}};this.re=function(el,ev,$u){if(el.addEventListener){el.addEventListener(ev,$u,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$u);}};this.ue=function(el,ev,$u){if(el.removeEventListener){el.removeEventListener(ev,$u,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$u);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.create=function(){var $v=document.createElement("div");$v.id=this.id+"hide";$v.style.position='fixed';$v.style.left="0px";$v.style.top="0px";$v.style.right="0px";$v.style.bottom="0px";$v.style.backgroundColor="black";$v.style.opacity=0.50;$v.oncontextmenu=function(){return false;};document.body.appendChild($v);var $w=document.createElement("div");$w.id=this.id+'popup';$w.style.position='fixed';$w.style.left='50%';$w.style.top='0px';$w.style.backgroundColor='white';$w.style.width="50px";$w.style.height="50px";if(this.dragDrop){$w.onmousedown=this.dragStart;};var $x=50;var $y=null;if(this.useIframe){$y=document.createElement("iframe");$y.id=this.id+"iframe";$y.name=this.id+"iframe";$y.frameBorder='0';$y.style.width='100%';$y.style.height=$x+'px';$w.appendChild($y);};document.body.appendChild($w);this.div=$w;this.iframe=$y;this.hideDiv=$v;};this.dragStart=function(e){$f.maskIframe();$f.coords=$f.mc(e||window.event);$f.start={x:$f.div.offsetLeft,y:$f.div.offsetTop};};this.setInnerHTML=function(id,$i){var $z=window.frames[id];var $l=$z.contentWindow||$z.document||$z.contentDocument;if($l.document){$l=$l.document;};$l.body.innerHTML=$i;};this.close=function($d){this.result=$d;this.hide();};this.hide=function(){if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};DayPilot.ModalStatic.remove(this);if(this.closed){this.closed();}};};})();


