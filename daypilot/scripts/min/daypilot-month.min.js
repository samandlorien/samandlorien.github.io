/*
DayPilot Lite
Copyright (c) 2005 - 2014 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 130
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(){var $a=function(){};if(typeof DayPilot.Month!=='undefined'){return;};function loadDefaultCss(){if(DayPilot.Global.defaultMonthCss){return;};var $b=DayPilot.sheet();$b.add(".month_default_main","border: 1px solid #aaa;font-family: Tahoma, Arial, sans-serif; font-size: 12px;color: #666;");$b.add(".month_default_cell_inner","border-right: 1px solid #ddd;border-bottom: 1px solid #ddd;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;background-color: #f9f9f9;");$b.add(".month_default_cell_business .month_default_cell_inner","background-color: #fff;");$b.add(".month_default_cell_header","text-align: right;padding-right: 2px;");$b.add(".month_default_header_inner",'text-align: center; vertical-align: middle;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #999;border-bottom: 1px solid #999;cursor: default;color: #666;background: #eee;');$b.add(".month_default_message",'padding: 10px;opacity: 0.9;filter: alpha(opacity=90);color: #ffffff;background: #ffa216;background: -webkit-gradient(linear, left top, left bottom, from(#ffa216), to(#ff8400));background: -webkit-linear-gradient(top, #ffa216 0%, #ff8400);background: -moz-linear-gradient(top, #ffa216 0%, #ff8400);background: -ms-linear-gradient(top, #ffa216 0%, #ff8400);background: -o-linear-gradient(top, #ffa216 0%, #ff8400);background: linear-gradient(top, #ffa216 0%, #ff8400);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffa216", endColorStr="#ff8400");');$b.add(".month_default_event_inner",'position: absolute;top: 0px;bottom: 0px;left: 1px;right: 1px;overflow:hidden;padding: 2px;padding-left: 5px;font-size: 12px;color: #666;background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");border: 1px solid #999;border-radius: 0px;');$b.add(".month_default_event_continueright .month_default_event_inner","border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-right-style: dotted;");$b.add(".month_default_event_continueleft .month_default_event_inner","border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-left-style: dotted;");$b.add(".month_default_event_hover .month_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#e8e8e8));background: -webkit-linear-gradient(top, #ffffff 0%, #e8e8e8);background: -moz-linear-gradient(top, #ffffff 0%, #e8e8e8);background: -ms-linear-gradient(top, #ffffff 0%, #e8e8e8);background: -o-linear-gradient(top, #ffffff 0%, #e8e8e8);background: linear-gradient(top, #ffffff 0%, #e8e8e8);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#e8e8e8");');$b.add(".month_default_selected .month_default_event_inner, .month_default_event_hover.month_default_selected .month_default_event_inner","background: #ddd;");$b.add(".month_default_shadow_inner","background-color: #666666;opacity: 0.5;filter: alpha(opacity=50);height: 100%;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;");$b.commit();DayPilot.Global.defaultMonthCss=true;};var DayPilotMonth={};DayPilotMonth.Month=function($c){this.v='130';this.nav={};this.nav.top=document.getElementById($c);var $d=this;this.id=$c;this.isMonth=true;this.hideUntilInit=true;this.api=2;this.cssOnly=true;this.cssClassPrefix="month_default";this.startDate=new DayPilot.Date();this.width='100%';this.cellHeight=100;this.eventFontColor="#000000";this.eventFontFamily="Tahoma";this.eventFontSize="11px";this.headerBackColor='#F3F3F9';this.headerFontColor='#42658C';this.headerFontFamily="Tahoma";this.headerFontSize="10pt";this.headerHeight=20;this.weekStarts=1;this.innerBorderColor='#cccccc';this.borderColor='#CED2CE';this.eventHeight=25;this.cellHeaderHeight=16;this.afterRender=function(){};this.backColor='#ffffff';this.nonBusinessBackColor='#ffffff';this.cellHeaderBackColor='#ffffff';this.cellHeaderFontColor='#42658C';this.cellHeaderFontFamily='Tahoma';this.cellHeaderFontSize='10pt';this.eventBackColor='#2951A5';this.eventBorderColor='#2951A5';this.eventFontColor='#ffffff';this.eventFontFamily='Tahoma';this.eventFontSize='11px';this.cellWidth=14.285;this.lineSpace=1;this.eventTimeFontColor='gray';this.eventTimeFontFamily='Tahoma';this.eventTimeFontSize='8pt';this.eventClickHandling='Enabled';this.eventMoveHandling='Update';this.eventResizeHandling='Update';this.timeRangeSelectedHandling='Enabled';this.backendUrl=null;this.cellEvents=[];this.elements={};this.elements.events=[];this.cache={};this.updateView=function($e,$f){var $e=eval("("+$e+")");if($e.CallBackRedirect){document.location.href=$e.CallBackRedirect;return;};if($e.UpdateType==="None"){$d.fireAfterRenderDetached($e.CallBackData,true);return;};$d.events=$e.Events;if($e.UpdateType==="Full"){$d.startDate=$e.StartDate;$d.headerBackColor=$e.HeaderBackColor?$e.HeaderBackColor:$d.headerBackColor;$d.backColor=$e.BackColor?$e.BackColor:$d.backColor;$d.nonBusinessBackColor=$e.NonBusinessBackColor?$e.NonBusinessBackColor:$d.nonBusinessBackColor;$d.timeFormat=$e.TimeFormat?$e.TimeFormat:$d.timeFormat;if(typeof $e.WeekStarts!=='undefined'){$d.weekStarts=$e.WeekStarts;};$d.hashes=$e.Hashes;};$d.$0P();$d.$0Q();$d.$0R();if($e.UpdateType==="Full"){$d.$0S();$d.$0T();};$d.updateHeight();$d.show();$d.$0U();$d.fireAfterRenderDetached($e.CallBackData,true);};this.fireAfterRenderDetached=function($g,$h){var $i=function($g,$j){return function(){if($d.afterRender){$d.afterRender($g,$j);}};};window.setTimeout($i($g,$h),0);};this.lineHeight=function(){return this.eventHeight+this.lineSpace;};this.events={};this.events.list=[];this.events.add=function(e){e.calendar=$d;if(!$d.events.list){$d.events.list=[];};$d.events.list.push(e.data);$d.update();};this.events.update=function(e){e.commit();$d.update();};this.events.remove=function(e){var $k=DayPilot.indexOf($d.events.list,e.data);$d.events.list.splice($k,1);$d.update();};this.update=function(){if(!this.cells){return;};var $l=true;$d.$0P();$d.$0Q();$d.$0R();if($l){$d.$0S();$d.$0T();};$d.updateHeight();$d.show();$d.$0U();};this.$0R=function(){var $m=this.events.list;for(var x=0;x<$m.length;x++){var e=new DayPilot.Event($m[x],this);if(e.start().getTime()>e.end().getTime()){continue;};for(var i=0;i<this.rows.length;i++){var $n=this.rows[i];if($n.belongsHere(e)){$n.events.push(e);}}};for(var ri=0;ri<this.rows.length;ri++){var $n=this.rows[ri];$n.events.sort(this.eventComparer);for(var ei=0;ei<this.rows[ri].events.length;ei++){var ev=$n.events[ei];var $o=$n.getStartColumn(ev);var $p=$n.getWidth(ev);var $q=$n.putIntoLine(ev,$o,$p,ri);}}};this.$0P=function(){for(var i=0;i<this.elements.events.length;i++){var e=this.elements.events[i];e.event=null;e.click=null;e.parentNode.removeChild(e);};this.elements.events=[];};this.$0U=function(){this.$0V();};this.$0V=function(){this.elements.events=[];for(var ri=0;ri<this.rows.length;ri++){var $n=this.rows[ri];for(var li=0;li<$n.lines.length;li++){var $q=$n.lines[li];for(var pi=0;pi<$q.length;pi++){this.drawEvent($q[pi]);}}}};this.eventComparer=function(a,b){if(!a||!b||!a.start||!b.start){return 0;};var $r=a.start().getTime()-b.start().getTime();if($r!==0){return $r;};var $s=b.end().getTime()-a.end().getTime();return $s;};this.drawShadow=function(x,y,$q,$t,$u,e){if(!$u){$u=0;};var $v=$t;this.shadow={};this.shadow.list=[];this.shadow.start={x:x,y:y};this.shadow.width=$t;var $w=y*7+x-$u;if($w<0){$v+=$w;x=0;y=0;};var $x=$u;while($x>=7){y--;$x-=7;};if($x>x){var $y=7-this.getColCount();if($x>(x+$y)){y--;x=x+7-$x;}else{$v=$v-$x+x;x=0;}}else{x-=$x;};if(y<0){y=0;x=0;};var $z=null;if(DayPilotMonth.resizingEvent){$z='w-resize';}else if(DayPilotMonth.movingEvent){$z="move";};this.nav.top.style.cursor=$z;while($v>0&&y<this.rows.length){var $A=Math.min(this.getColCount()-x,$v);var $n=this.rows[y];var top=this.getRowTop(y);var $B=$n.getHeight();var $C=document.createElement("div");$C.setAttribute("unselectable","on");$C.style.position='absolute';$C.style.left=(this.getCellWidth()*x)+'%';$C.style.width=(this.getCellWidth()*$A)+'%';$C.style.top=(top)+'px';$C.style.height=($B)+'px';$C.style.cursor=$z;var $D=document.createElement("div");$D.setAttribute("unselectable","on");$C.appendChild($D);$D.style.position="absolute";$D.style.top="0px";$D.style.right="0px";$D.style.left="0px";$D.style.bottom="0px";$D.style.backgroundColor="#aaaaaa";$D.style.opacity=0.5;$D.style.filter="alpha(opacity=50)";if(e){$D.style.overflow='hidden';$D.style.fontSize=this.eventFontSize;$D.style.fontFamily=this.eventFontFamily;$D.style.color=this.eventFontColor;$D.innerHTML=e.client.html();};this.nav.top.appendChild($C);this.shadow.list.push($C);$v-=($A+7-this.getColCount());x=0;y++;}};this.clearShadow=function(){if(this.shadow){for(var i=0;i<this.shadow.list.length;i++){this.nav.top.removeChild(this.shadow.list[i]);};this.shadow=null;this.nav.top.style.cursor='';}};this.getEventTop=function($n,$q){var top=this.headerHeight;for(var i=0;i<$n;i++){top+=this.rows[i].getHeight();};top+=this.cellHeaderHeight;top+=$q*this.lineHeight();return top;};this.getDateFromCell=function(x,y){return DayPilot.Date.addDays(this.firstDate,y*7+x);};this.drawEvent=function(ep){var $n=ep.part.row;var $q=ep.part.line;var $o=ep.part.colStart;var $p=ep.part.colWidth;var $E=this.getCellWidth()*($o);var $t=this.getCellWidth()*($p);var top=this.getEventTop($n,$q);var e=document.createElement("div");e.setAttribute("unselectable","on");e.style.height=this.eventHeight+'px';if(this.cssOnly){e.className=this.$0W("_event");}else{e.style.fontFamily=this.eventFontFamily;};e.event=ep;e.style.width=$t+'%';e.style.position='absolute';e.style.left=$E+'%';e.style.top=top+'px';if(this.showToolTip&&ep.client.toolTip()){e.title=ep.client.toolTip();};e.onclick=$d.eventClickDispatch;e.onmousedown=function(ev){ev=ev||window.event;var $F=ev.which||ev.button;ev.cancelBubble=true;if(ev.stopPropagation){ev.stopPropagation();};if($F===1){DayPilotMonth.movingEvent=null;if(this.style.cursor==='w-resize'||this.style.cursor==='e-resize'){var $G={};$G.start={};$G.start.x=$o;$G.start.y=$n;$G.event=e.event;$G.width=DayPilot.Date.daysSpan($G.event.start().d,$G.event.end().d)+1;$G.direction=this.style.cursor;DayPilotMonth.resizingEvent=$G;}else if(this.style.cursor==='move'||$d.eventMoveHandling!=='Disabled'){$d.clearShadow();var $H=DayPilot.mo2($d.nav.top,ev);if(!$H){return;};var $I=$d.getCellBelowPoint($H.x,$H.y);var $w=DayPilot.Date.daysDiff(ep.start(),$d.rows[$n].start);var $u=($I.y*7+$I.x)-($n*7+$o);if($w){$u+=$w;};var $J={};$J.start={};$J.start.x=$o;$J.start.y=$n;$J.start.line=$q;$J.offset=$d.eventMoveToPosition?0:$u;$J.colWidth=$p;$J.event=e.event;$J.coords=$H;DayPilotMonth.movingEvent=$J;}}};e.onmousemove=function(ev){if(typeof(DayPilotMonth)==='undefined'){return;};if(DayPilotMonth.movingEvent||DayPilotMonth.resizingEvent){return;};var $u=DayPilot.mo3(e,ev);if(!$u){return;};var $K=6;if($u.x<=$K&&$d.eventResizeHandling!=='Disabled'){if(ep.part.startsHere){e.style.cursor="w-resize";e.dpBorder='left';}else{e.style.cursor='not-allowed';}}else if(e.clientWidth-$u.x<=$K&&$d.eventResizeHandling!=='Disabled'){if(ep.part.endsHere){e.style.cursor="e-resize";e.dpBorder='right';}else{e.style.cursor='not-allowed';}}else{e.style.cursor='default';}};e.onmouseout=function(ev){e.style.cursor='';};var $L=document.createElement("div");$L.setAttribute("unselectable","on");if(this.cssOnly){$L.className=this.$0W("_event_inner");$L.innerHTML=ep.client.html();}else{var back=(ep.data.backColor)?ep.data.backColor:this.eventBackColor;$L.style.height=(this.eventHeight-2)+'px';$L.style.overflow='hidden';$L.style.position="absolute";$L.style.left="2px";$L.style.right="2px";$L.style.paddingLeft='2px';$L.style.border='1px solid '+$d.eventBorderColor;$L.style.backgroundColor=back;$L.style.fontFamily="";$L.style.MozBorderRadius="5px";$L.style.webkitBorderRadius="5px";$L.style.borderRadius="5px";var $D=[];$D.push("<div unselectable='on' style='");$D.push("font-size:");$D.push(this.eventFontSize);$D.push(";color:");$D.push(this.eventFontColor);$D.push(";font-family:");$D.push(this.eventFontFamily);$D.push(";'>");$D.push(ep.client.html());$D.push("</div>");$L.innerHTML=$D.join('');};e.appendChild($L);this.elements.events.push(e);this.nav.events.appendChild(e);};this.lastVisibleDayOfMonth=function(){return this.startDate.lastDayOfMonth();};this.$0Q=function(){if(typeof this.startDate==='string'){this.startDate=DayPilot.Date.fromStringSortable(this.startDate);};this.startDate=this.startDate.firstDayOfMonth();this.firstDate=this.startDate.firstDayOfWeek(this.getWeekStart());var $M=this.startDate;var $N;var $O=this.lastVisibleDayOfMonth().d;var $P=DayPilot.Date.daysDiff(this.firstDate,$O)+1;$N=Math.ceil($P/7);this.days=$N*7;this.rows=[];for(var x=0;x<$N;x++){var r={};r.start=DayPilot.Date.addDays(this.firstDate,x*7);r.end=DayPilot.Date.addDays(r.start,this.getColCount());r.events=[];r.lines=[];r.index=x;r.minHeight=this.cellHeight;r.calendar=this;r.belongsHere=function(ev){if(ev.end().getTime()===ev.start().getTime()&&ev.start().getTime()===this.start.getTime()){return true;};return !(ev.end().getTime()<=this.start.getTime()||ev.start().getTime()>=this.end.getTime());};r.getPartStart=function(ev){return DayPilot.Date.max(this.start,ev.start());};r.getPartEnd=function(ev){return DayPilot.Date.min(this.end,ev.end());};r.getStartColumn=function(ev){var $Q=this.getPartStart(ev);return DayPilot.Date.daysDiff(this.start,$Q);};r.getWidth=function(ev){return DayPilot.Date.daysSpan(this.getPartStart(ev),this.getPartEnd(ev))+1;};r.putIntoLine=function(ev,$o,$p,$n){var $R=this;for(var i=0;i<this.lines.length;i++){var $q=this.lines[i];if($q.isFree($o,$p)){$q.addEvent(ev,$o,$p,$n,i);return i;}};var $q=[];$q.isFree=function($o,$p){var $S=true;for(var i=0;i<this.length;i++){if(!($o+$p-1<this[i].part.colStart||$o>this[i].part.colStart+this[i].part.colWidth-1)){$S=false;}};return $S;};$q.addEvent=function(ep,$o,$p,$n,$k){ep.part.colStart=$o;ep.part.colWidth=$p;ep.part.row=$n;ep.part.line=$k;ep.part.startsHere=$R.start.getTime()<=ep.start().getTime();ep.part.endsHere=$R.end.getTime()>=ep.end().getTime();this.push(ep);};$q.addEvent(ev,$o,$p,$n,this.lines.length);this.lines.push($q);return this.lines.length-1;};r.getStart=function(){var $T=0;for(var i=0;i<$d.rows.length&&i<this.index;i++){$T+=$d.rows[i].getHeight();}};r.getHeight=function(){return Math.max(this.lines.length*$d.lineHeight()+$d.cellHeaderHeight,this.calendar.cellHeight);};this.rows.push(r);};this.endDate=DayPilot.Date.addDays(this.firstDate,$N*7);};this.getHeight=function(){var $B=this.headerHeight;for(var i=0;i<this.rows.length;i++){$B+=this.rows[i].getHeight();};return $B;};this.getWidth=function($T,end){var $U=(end.y*7+end.x)-($T.y*7+$T.x);return $U+1;};this.getMinCoords=function($V,$W){if(($V.y*7+$V.x)<($W.y*7+$W.x)){return $V;}else{return $W;}};this.$0W=function($X){var $Y=this.theme||this.cssClassPrefix;if($Y){return $Y+$X;}else{return "";}};this.drawTop=function(){var $Z=this.nav.top;$Z.setAttribute("unselectable","on");$Z.style.MozUserSelect='none';$Z.style.KhtmlUserSelect='none';$Z.style.WebkitUserSelect='none';$Z.style.position='relative';if(this.width){$Z.style.width=this.width;};$Z.style.height=this.getHeight()+'px';$Z.onselectstart=function(e){return false;};if(this.hideUntilInit){$Z.style.visibility='hidden';};if(this.cssOnly){$Z.className=this.$0W("_main");}else{$Z.style.border="1px solid "+this.borderColor;};var $00=document.createElement("div");this.nav.cells=$00;$00.style.position="absolute";$00.style.left="0px";$00.style.right="0px";$00.setAttribute("unselectable","on");$Z.appendChild($00);var $m=document.createElement("div");this.nav.events=$m;$m.style.position="absolute";$m.style.left="0px";$m.style.right="0px";$m.setAttribute("unselectable","on");$Z.appendChild($m);$Z.onmousemove=function(ev){if(DayPilotMonth.resizingEvent){var $H=DayPilot.mo2($d.nav.top,ev);if(!$H){return;};var $I=$d.getCellBelowPoint($H.x,$H.y);$d.clearShadow();var $G=DayPilotMonth.resizingEvent;var $01=$G.start;var $t,$T;if($G.direction==='w-resize'){$T=$I;var $02=$G.event.end().d;if(DayPilot.Date.getDate($02).getTime()===$02.getTime()){$02=DayPilot.Date.addDays($02,-1);};var end=$d.getCellFromDate($02);$t=$d.getWidth($I,end);}else{$T=$d.getCellFromDate($G.event.start().d);$t=$d.getWidth($T,$I);};if($t<1){$t=1;};$d.drawShadow($T.x,$T.y,0,$t);}else if(DayPilotMonth.movingEvent){var $H=DayPilot.mo2($d.nav.top,ev);if(!$H){return;};if($H.x===DayPilotMonth.movingEvent.coords.x&&$H.y===DayPilotMonth.movingEvent.coords.y){return;};var $I=$d.getCellBelowPoint($H.x,$H.y);$d.clearShadow();var event=DayPilotMonth.movingEvent.event;var $u=DayPilotMonth.movingEvent.offset;var $t=$d.cellMode?1:DayPilot.Date.daysSpan(event.start().d,event.end().d)+1;if($t<1){$t=1;};$d.drawShadow($I.x,$I.y,0,$t,$u,event);}else if(DayPilotMonth.timeRangeSelecting){var $H=DayPilot.mo2($d.nav.top,ev);if(!$H){return;};var $I=$d.getCellBelowPoint($H.x,$H.y);$d.clearShadow();var $T=DayPilotMonth.timeRangeSelecting;var $03=$T.y*7+$T.x;var $04=$I.y*7+$I.x;var $t=Math.abs($04-$03)+1;if($t<1){$t=1;};var $05=$03<$04?$T:$I;DayPilotMonth.timeRangeSelecting.from={x:$05.x,y:$05.y};DayPilotMonth.timeRangeSelecting.width=$t;DayPilotMonth.timeRangeSelecting.moved=true;$d.drawShadow($05.x,$05.y,0,$t,0,null);}};};this.updateHeight=function(){this.nav.top.style.height=this.getHeight()+'px';for(var x=0;x<this.cells.length;x++){for(var y=0;y<this.cells[x].length;y++){this.cells[x][y].style.top=this.getRowTop(y)+'px';this.cells[x][y].style.height=this.rows[y].getHeight()+'px';}}};this.getCellBelowPoint=function(x,y){var $06=Math.floor(this.nav.top.clientWidth/this.getColCount());var $07=Math.min(Math.floor(x/$06),this.getColCount()-1);var $n=null;var $B=this.headerHeight;var $08=0;for(var i=0;i<this.rows.length;i++){var $09=$B;$B+=this.rows[i].getHeight();if(y<$B){$08=y-$09;$n=i;break;}};if($n===null){$n=this.rows.length-1;};var $I={};$I.x=$07;$I.y=$n;$I.relativeY=$08;return $I;};this.getCellFromDate=function($0a){var $t=DayPilot.Date.daysDiff(this.firstDate,$0a);var $I={x:0,y:0};while($t>=7){$I.y++;$t-=7;};$I.x=$t;return $I;};this.$0T=function(){var $0b=document.createElement("div");$0b.oncontextmenu=function(){return false;};this.nav.cells.appendChild($0b);this.cells=[];for(var x=0;x<this.getColCount();x++){this.cells[x]=[];var $0c=null;var $0d=document.createElement("div");$0d.setAttribute("unselectable","on");$0d.style.position='absolute';$0d.style.left=(this.getCellWidth()*x)+'%';$0d.style.width=(this.getCellWidth())+'%';$0d.style.top='0px';$0d.style.height=(this.headerHeight)+'px';var $0e=x+this.getWeekStart();if($0e>6){$0e-=7;};if(this.cssOnly){$0d.className=this.$0W("_header");};var $L=document.createElement("div");$L.setAttribute("unselectable","on");$L.innerHTML=$0f.locale().dayNames[$0e];$0d.appendChild($L);$L.style.position="absolute";$L.style.top="0px";$L.style.bottom="0px";$L.style.left="0px";$L.style.right="0px";if(this.cssOnly){$L.className=this.$0W("_header_inner");}else{$L.style.backgroundColor=this.headerBackColor;$L.style.fontFamily=this.headerFontFamily;$L.style.fontSize=this.headerFontSize;$L.style.color=this.headerFontColor;$L.style.textAlign='center';$L.style.cursor='default';if(x!==this.getColCount()-1){$L.style.borderRight='1px solid '+this.borderColor;}};$L.innerHTML=$0f.locale().dayNames[$0e];$0b.appendChild($0d);for(var y=0;y<this.rows.length;y++){this.drawCell(x,y,$0b);}}};this.$0S=function(){for(var x=0;x<this.cells.length;x++){for(var y=0;y<this.cells[x].length;y++){this.cells[x][y].onclick=null;}};this.nav.cells.innerHTML='';};this.$0X=function(){return $d.api===2;};this.drawCell=function(x,y,$0b){var $n=this.rows[y];var d=DayPilot.Date.addDays(this.firstDate,y*7+x);var $0g=this.cellProperties?this.cellProperties[y*this.getColCount()+x]:null;var $I=document.createElement("div");$I.setAttribute("unselectable","on");$I.style.position='absolute';$I.style.cursor='default';$I.style.left=(this.getCellWidth()*x)+'%';$I.style.width=(this.getCellWidth())+'%';$I.style.top=(this.getRowTop(y))+'px';$I.style.height=($n.getHeight())+'px';if(this.cssOnly){$I.className=this.$0W("_cell");if(!this.isWeekend(d)){var $0h=this.$0W("_cell_business");DayPilot.Util.addClass($I,$0h);}};var $0i=this.startDate.addMonths(-1).getMonth();var $0j=this.startDate.addMonths(1).getMonth();var $0k=this.startDate.getMonth();var $L=document.createElement("div");$L.setAttribute("unselectable","on");$I.appendChild($L);$L.style.position="absolute";$L.style.left="0px";$L.style.right="0px";$L.style.top="0px";$L.style.bottom="0px";if(this.cssOnly){$L.className=this.$0W("_cell_inner");}else{$L.style.backgroundColor=this.getCellBackColor(d);if(x!==this.getColCount()-1){$L.style.borderRight='1px solid '+this.innerBorderColor;};if(y===0){$L.style.borderTop='1px solid '+this.borderColor;};$L.style.borderBottom='1px solid '+this.innerBorderColor;};$I.onmousedown=function(e){if($d.timeRangeSelectedHandling!=='Disabled'){$d.clearShadow();DayPilotMonth.timeRangeSelecting={"root":$d,"x":x,"y":y,"from":{x:x,y:y},"width":1};}};$I.onclick=function(){var $0l=function(d){var $T=new DayPilot.Date(d);var end=$T.addDays(1);$d.timeRangeSelectedDispatch($T,end);};if($d.timeRangeSelectedHandling!=='Disabled'){$0l(d);return;}};var $0m=document.createElement("div");$0m.setAttribute("unselectable","on");$0m.style.height=this.cellHeaderHeight+"px";if(this.cssOnly){$0m.className=this.$0W("_cell_header");}else{if(this.cellHeaderBackColor){$0m.style.backgroundColor=this.cellHeaderBackColor;};$0m.style.paddingRight='2px';$0m.style.textAlign="right";$0m.style.fontFamily=this.cellHeaderFontFamily;$0m.style.fontSize=this.cellHeaderFontSize;$0m.style.color=this.cellHeaderFontColor;};var $0a=d.getUTCDate();if($0a===1){$0m.innerHTML=$0f.locale().monthNames[d.getUTCMonth()]+' '+$0a;}else{$0m.innerHTML=$0a;};$L.appendChild($0m);this.cells[x][y]=$I;$0b.appendChild($I);};this.getWeekStart=function(){return $0f.locale().weekStarts;};this.getColCount=function(){return 7;};this.getCellWidth=function(){return 14.285;};this.getCellBackColor=function(d){if(d.getUTCDay()===6||d.getUTCDay()===0){return this.nonBusinessBackColor;};return this.backColor;};this.getRowTop=function($k){var top=this.headerHeight;for(var i=0;i<$k;i++){top+=this.rows[i].getHeight();};return top;};this.callBack2=function($0n,$g,$0o){var $0p={};$0p.action=$0n;$0p.parameters=$0o;$0p.data=$g;$0p.header=this.getCallBackHeader();var $0q="JSON"+DayPilot.JSON.stringify($0p);if(this.backendUrl){DayPilot.request(this.backendUrl,this.callBackResponse,$0q,this.ajaxError);}};this.callBackResponse=function($0r){$d.updateView($0r.responseText);};this.getCallBackHeader=function(){var h={};h.control="dpm";h.id=this.id;h.v=this.v;h.visibleStart=new DayPilot.Date(this.firstDate);h.visibleEnd=h.visibleStart.addDays(this.days);h.startDate=$d.startDate;h.headerBackColor=this.headerBackColor;h.backColor=this.backColor;h.nonBusinessBackColor=this.nonBusinessBackColor;h.timeFormat=this.timeFormat;h.weekStarts=this.weekStarts;return h;};this.eventClickCallBack=function(e,$g){this.callBack2('EventClick',$g,e);};this.eventClickDispatch=function(e){DayPilotMonth.movingEvent=null;DayPilotMonth.resizingEvent=null;var $0s=this;var e=e||window.event;var $0t=e.ctrlKey;e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();};$d.eventClickSingle($0s,$0t);};this.eventClickSingle=function($0s){var e=$0s.event;if(!e.client.clickEnabled()){return;};if($d.$0X()){var $0u={};$0u.e=e;$0u.preventDefault=function(){this.preventDefault.value=true;};if(typeof $d.onEventClick==='function'){$d.onEventClick($0u);if($0u.preventDefault.value){return;}};switch($d.eventClickHandling){case 'CallBack':$d.eventClickCallBack(e);break;};if(typeof $d.onEventClicked==='function'){$d.onEventClicked($0u);}}else{switch($d.eventClickHandling){case 'CallBack':$d.eventClickCallBack(e);break;case 'JavaScript':$d.onEventClick(e);break;}}};this.eventMoveCallBack=function(e,$0v,$0w,$g,$0x){if(!$0v)throw 'newStart is null';if(!$0w)throw 'newEnd is null';var $0y={};$0y.e=e;$0y.newStart=$0v;$0y.newEnd=$0w;$0y.position=$0x;this.callBack2('EventMove',$g,$0y);};this.eventMoveDispatch=function(e,x,y,$u,ev,$0x){var $0z=DayPilot.Date.getTime(e.start().d);var $02=DayPilot.Date.getDate(e.end().d);if($02.getTime()!==e.end().d.getTime()){$02=DayPilot.Date.addDays($02,1);};var $0A=DayPilot.Date.diff(e.end().d,$02);var $0B=this.getDateFromCell(x,y);$0B=DayPilot.Date.addDays($0B,-$u);var $t=DayPilot.Date.daysSpan(e.start().d,e.end().d)+1;var $0C=DayPilot.Date.addDays($0B,$t);var $0v=new DayPilot.Date(DayPilot.Date.addTime($0B,$0z));var $0w=new DayPilot.Date(DayPilot.Date.addTime($0C,$0A));if($d.$0X()){var $0u={};$0u.e=e;$0u.newStart=$0v;$0u.newEnd=$0w;$0u.preventDefault=function(){this.preventDefault.value=true;};if(typeof $d.onEventResize==='function'){$d.onEventResize($0u);if($0u.preventDefault.value){return;}};switch($d.eventMoveHandling){case 'CallBack':$d.eventMoveHandling(e,$0v,$0w);break;case 'Update':e.start($0v);e.end($0w);$d.events.update(e);break;};if(typeof $d.onEventResized==='function'){$d.onEventResized($0u);}}else{switch($d.eventMoveHandling){case 'CallBack':$d.eventMoveCallBack(e,$0v,$0w);break;case 'JavaScript':$d.onEventMove(e,$0v,$0w);break;}}};this.eventResizeCallBack=function(e,$0v,$0w,$g){if(!$0v)throw 'newStart is null';if(!$0w)throw 'newEnd is null';var $0y={};$0y.e=e;$0y.newStart=$0v;$0y.newEnd=$0w;this.callBack2('EventResize',$g,$0y);};this.eventResizeDispatch=function(e,$T,$t){var $0z=DayPilot.Date.getTime(e.start().d);var $02=DayPilot.Date.getDate(e.end().d);if(!DayPilot.Date.equals($02,e.end().d)){$02=DayPilot.Date.addDays($02,1);};var $0A=DayPilot.Date.diff(e.end().d,$02);var $0B=this.getDateFromCell($T.x,$T.y);var $0C=DayPilot.Date.addDays($0B,$t);var $0v=new DayPilot.Date(DayPilot.Date.addTime($0B,$0z));var $0w=new DayPilot.Date(DayPilot.Date.addTime($0C,$0A));if($d.$0X()){var $0u={};$0u.e=e;$0u.newStart=$0v;$0u.newEnd=$0w;$0u.preventDefault=function(){this.preventDefault.value=true;};if(typeof $d.onEventResize==='function'){$d.onEventResize($0u);if($0u.preventDefault.value){return;}};switch($d.eventResizeHandling){case 'CallBack':$d.eventResizeCallBack(e,$0v,$0w);break;case 'Update':e.start($0v);e.end($0w);$d.events.update(e);break;};if(typeof $d.onEventResized==='function'){$d.onEventResized($0u);}}else{switch($d.eventResizeHandling){case 'CallBack':$d.eventResizeCallBack(e,$0v,$0w);break;case 'JavaScript':$d.onEventResize(e,$0v,$0w);break;}}};this.timeRangeSelectedCallBack=function($T,end,$g){var $0D={};$0D.start=$T;$0D.end=end;this.callBack2('TimeRangeSelected',$g,$0D);};this.timeRangeSelectedDispatch=function($T,end){if(this.$0X()){var $0u={};$0u.start=$T;$0u.end=end;$0u.preventDefault=function(){this.preventDefault.value=true;};if(typeof $d.onTimeRangeSelect==='function'){$d.onTimeRangeSelect($0u);if($0u.preventDefault.value){return;}};switch($d.timeRangeSelectedHandling){case 'CallBack':$d.timeRangeSelectedCallBack($T,end);break;};if(typeof $d.onTimeRangeSelected==='function'){$d.onTimeRangeSelected($0u);}}else{switch($d.timeRangeSelectedHandling){case 'CallBack':$d.timeRangeSelectedCallBack($T,end);break;case 'JavaScript':$d.onTimeRangeSelected($T,end);break;}}};this.clearSelection=function(){$d.clearShadow();};this.commandCallBack=function($0E,$g){this.stopAutoRefresh();var $0y={};$0y.command=$0E;this.callBack2('Command',$g,$0y);};this.isWeekend=function($0a){$0a=new DayPilot.Date($0a);var $0F=0;var $0G=6;if($0a.dayOfWeek()===$0F){return true;};if($0a.dayOfWeek()===$0G){return true;};return false;};this.$0Y={};this.$0Y.locale=function(){var $0H=DayPilot.Locale.find($d.locale);if(!$0H){return DayPilot.Locale.US;};return $0H;};var $0f=this.$0Y;this.debug=function($0I,$0J){if(!this.debuggingEnabled){return;};if(!$d.debugMessages){$d.debugMessages=[];};$d.debugMessages.push($0I);if(typeof console!=='undefined'){console.log($0I);}};this.registerGlobalHandlers=function(){if(!DayPilotMonth.globalHandlers){DayPilotMonth.globalHandlers=true;DayPilot.re(document,'mouseup',DayPilotMonth.gMouseUp);}};this.loadFromServer=function(){return(typeof this.events==='undefined')||(this.events===null);};this.show=function(){if(this.nav.top.style.visibility==='hidden'){this.nav.top.style.visibility='visible';}};this.initShort=function(){this.$0Q();this.drawTop();this.$0T();this.registerGlobalHandlers();this.callBack2('Init');};this.init=function(){var $0K=this.loadFromServer();loadDefaultCss();if($0K){this.initShort();return;};this.$0Q();this.$0R();this.drawTop();this.$0T();this.show();this.$0U();this.registerGlobalHandlers();if(this.messageHTML){this.message(this.messageHTML);};this.fireAfterRenderDetached(null,false);};this.Init=this.init;};DayPilotMonth.gMouseUp=function(ev){if(DayPilotMonth.movingEvent){var $0L=DayPilotMonth.movingEvent;if(!$0L.event){return;};if(!$0L.event.calendar){return;};if(!$0L.event.calendar.shadow){return;};if(!$0L.event.calendar.shadow.start){return;};var $d=DayPilotMonth.movingEvent.event.calendar;var e=DayPilotMonth.movingEvent.event;var $T=$d.shadow.start;var $0x=$d.shadow.position;var $u=DayPilotMonth.movingEvent.offset;$d.clearShadow();DayPilotMonth.movingEvent=null;var ev=ev||window.event;$d.eventMoveDispatch(e,$T.x,$T.y,$u,ev,$0x);ev.cancelBubble=true;if(ev.stopPropagation){ev.stopPropagation();};DayPilotMonth.movingEvent=null;return false;}else if(DayPilotMonth.resizingEvent){var $0L=DayPilotMonth.resizingEvent;if(!$0L.event){return;};if(!$0L.event.calendar){return;};if(!$0L.event.calendar.shadow){return;};if(!$0L.event.calendar.shadow.start){return;};var $d=DayPilotMonth.resizingEvent.event.calendar;var e=DayPilotMonth.resizingEvent.event;var $T=$d.shadow.start;var $t=$d.shadow.width;$d.clearShadow();DayPilotMonth.resizingEvent=null;$d.eventResizeDispatch(e,$T,$t);ev.cancelBubble=true;DayPilotMonth.resizingEvent=null;return false;}else if(DayPilotMonth.timeRangeSelecting){if(DayPilotMonth.timeRangeSelecting.moved){var $0M=DayPilotMonth.timeRangeSelecting;var $d=$0M.root;var $T=new DayPilot.Date($d.getDateFromCell($0M.from.x,$0M.from.y));var end=$T.addDays($0M.width);$d.timeRangeSelectedDispatch($T,end);$d.clearShadow();};DayPilotMonth.timeRangeSelecting=null;}};DayPilot.Month=DayPilotMonth.Month;if(typeof jQuery!=='undefined'){(function($){$.fn.daypilotMonth=function($0N){var $V=null;var j=this.each(function(){if(this.daypilot){return;};var $0O=new DayPilot.Month(this.id);this.daypilot=$0O;for(name in $0N){$0O[name]=$0N[name];};$0O.Init();if(!$V){$V=$0O;}});if(this.length===1){return $V;}else{return j;}};})(jQuery);};if(typeof Sys!=='undefined'&&Sys.Application&&Sys.Application.notifyScriptLoaded){Sys.Application.notifyScriptLoaded();}})();

